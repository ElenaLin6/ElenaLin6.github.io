[{"title":"Code Fever 做专属于自己的开源Git代码托管服务","slug":"codefever","url":"/2022/04/30/codefever/","content":"\n## 前言\n\n最近因为学校项目的一些关系，在频繁的写和更改代码，代码这种重要的东西，自然是需要多多备份的，一但丢失，就再也找不回来了。所以一开始选用程序员们都知道的GitHub和Gitee做为备份仓库。\n\n不过使用一段时间后问题就来了，GitHub的上传和拉取速度实在感人，对于我这种急性子的人来说，实在是难以忍受。而无论是GitHub还是Gitee呢，都不能无限制私人仓库，这就让人非常苦恼。毕竟自己要毕业的项目暂时不能随随便便公开，而且最重要的是分支比较多，这样我就需要多个仓库来存放代码，目前因此事已经苦恼多日。\n\n偶然听别人说可以自己搭建代码托管平台，于是打算动手实践。在网上浏览了一圈服务器之后发现真的好贵，而且环境的配置也非常困难。我在交流群里面询问小伙伴们有没有更好方案时，有一个小伙伴向我推荐轻量应用服务器，我随后便去了解了一下这个叫做轻量应用服务器的产品，发现他不仅环境配置简单，在安装系统时就有各式各样已经打包好的环境供用户选择，而且价格也是相当的亲民，于是当机立断开了一台来部署私有代码托管平台。\n\n我选的这个开源Git代码托管服务平台是Code Fever，我也考虑过比较有名的GitLab，但是他太吃内存了，我消费不起啊，而且对于我这种只想备份代码的个人来说，其实Code Fever就足够了。那么话不多说，让我们开始今天的教程吧~\n\n## Code Fever\n\n### 功能特性\n\n- 🆓 **永久免费:** 永久免费提供给大家使用，您无需担心付费\n- ❤️ **完整开源:** 毫无保留的完整开源，无任何编译或加密代码\n- 🥬 **轻量安装:** 极简设计风格，排除重度冗余的多余功能\n- ⚡️ **性能高效:** 速度极快，对服务器资源要求极低，1核CPU/1G内存即可运行\n- ♾️ **无限仓库:** 没有任何仓库数量、使用数量的限制\n- ⌨️ **代码对比:** 支持提交代码的不同版本支持高亮显示对比\n- 🛤️ **分支管理:** 完整支持 Git 原生分支和 Tag，帮助更清晰的管理代码\n- 🙋‍♂️ **合并请求（Merge Request）:** 支持多人协作，让代码版本控制更顺畅\n- 🙅🏻‍♀️ **分支保护:** 分支保护功能让代码提交安全可控，代码 Review 更容易清晰\n- 👥 **多人协作:** 支持多人团队协作，并可以设置每个成员的角色和权限\n- 🔌 **Webhook:** 支持Webhook功能，可轻松和其他系统进行集成\n- 🖥️ **管理后台:** 支持超级管理员后台，可以让团队leader管理所有项目和用户信息\n- 💬 **中英双语:** 原生支持中文和英文两种语言\n\n### 安装方法\n\n`CodeFever` 提供 `从零开始安装` 和 `Docker 镜像安装` 两种安装方式，可以根据自己的实际需要选择安装方式。\n\n#### 环境准备\n\n0.**轻量应用服务器的选购**\n\n孟买现在半价特惠，大家如果想购买可以点击文末或者评论区链接。这里建议小白使用宝塔镜像，如果使用centos镜像可以看宝塔搭建教程。\n\n![image-20220418174616345](https://ics.iczkj.com/pic/2022/04/18/752242921bca3.png)\n\n1.**宝塔搭建**\n\n==此处插入宝塔搭建教程==\n\n#### Docker 镜像安装\n\n**Docker 镜像说明**\n\n`CodeFever Community 版本` 的 `Docker 镜像` 是从 `dockerhub` 上的 `centos:centos7.9.2009` 镜像开始按照 从零开始安装中的步骤进行构建, 构建架构是 `x86_64 (amd64)` 如果有其他需求请自行构建镜像。\n\n**拉取镜像并启动**\n\n启动 `CodeFever Communiy 版本` 的 `Docker 镜像`\n\n先登录宝塔面板的终端，输入下面的拉取镜像命令。\n\n```\ndocker run -d --privileged=true --name codefever -p 80:80 -p 22:22 -it pgyer/codefever-community:latest /usr/sbin/init\n```\n\n![image-20220418184608016](https://ics.iczkj.com/pic/2022/04/18/aaf71720f1d27.png)\n\n1. 服务启动后尝试访问 `http://127.0.0.1` 或 `http://<server ip>` 登录\n2. 如果你希望使用 `22` 端口作为 `Git` 的 `SSH 协议`端口，你需要在启动镜像前将宿主系统的 `SSH 服务` `端口` 先修改成其他端口\n3. 如果服务异常你可以登录 Shell 去人工维护, 也可以直接重启容器重启服务。\n4. 默认管理员用户: `root@codefever.cn`, 密码: `123456`。登录后请修改密码并绑定 MFA 设备。\n\n![image-20220418184701577](https://ics.iczkj.com/pic/2022/04/18/e1c8917803ecd.png)\n\n#### 从零开始安装\n\n0. **安装前的说明**\n\n此安装步骤是 `从头开始安装` 步骤, 举例的脚本适用于大部分 `Linux` 操作系统。\n\n本文以 `CentOS 7.6 Linux` 操作系统为例，不同操作系统可能会有不同差别，需要用户自行对应到相应操作。\n\n整个安装过程需要使用 `root` 操作系统用户来完成。\n\n> `步骤1` - `步骤8` 均为软件环境安装步骤。如果你的操作已经具备当前步骤的软件或环境，此步骤可以跳过。\n\nPS：小白推荐使用宝塔安装环境，可以略过下面环境安装，不愿意使用宝塔可以按下面步骤搭建环境。\n\n1. 准备操作系统环境\n\n选择合适的 `Linux` 发行版本，推荐使用 `CentOS 7.x`。\n\n- 执行编译安装时需要保证机器至少有 `1800 MB` 内存，如果内存不足 `1800 MB` 请临时添加交换分区使可用内存到达 `1800 MB`。\n\n```\n# 临时增加 1000 MB Swap 空间\ndd if=/dev/zero of=/root/swap bs=1024 count=1000000\nmkswap /root/swap\nswapon /root/swap\n```\n\n为了顺利的设置必要的软件环境，以下的软件包必须安装到系统上。\n\n```\n# 安装基础软件包\nyum install -y sudo tcl tk gettext autoconf gcc cmake3 wget initscripts openssh-server crontabs mailx sendmail pcre pcre-devel libcurl libcurl-devel libxml2 libxml2-devel openssl openssl-devel sqlite sqlite-devel libpng libpng-devel libwebp libwebp-devel libjpeg libjpeg-devel libXpm libXpm-devel freetype freetype-devel oniguruma oniguruma-devel libyaml libyaml-devel\n```\n\n除此之外，你还需要安装 `libzip 1.7+` 库，需要去官网下载源码包解压后安装。\n\n下载地址: https://libzip.org/download/\n\n```\n# 编译安装 libzip\ncd libzip-1.x.x\nmkdir build\ncd build\ncmake3 ../\nmake && make install\nexport PKG_CONFIG_PATH=\"/usr/local/lib64/pkgconfig/:/usr/local/lib/pkgconfig/\"\n```\n\n2. 安装 nginx\n\n访问 http://nginx.org/en/download.html 下载 `Nginx` 源码解压后编译并安装安装到 `/usr/local/nginx` 目录下:\n\n```\n# 安装 nginx 到 /usr/local/nginx 目录\ncd nginx-1.x.x\n./configure --prefix=/usr/local/nginx\nmake && make install\n```\n\n3. 安装 PHP\n\n访问 https://www.php.net/downloads 下载 `PHP` 源码 (推荐 `7.4` 版本)，解压后编译并安装到 `/usr/local/php` 目录下\n\n> 配置检查过程可能会提示缺少某些软件包，需要根据配置检查过程提示自行安装后再重复配置检查过程\n\n```\n# 安装 php 到 /usr/local/php 目录\ncd php-7.4.x\n./configure --prefix=/usr/local/php --with-config-file-path=/usr/local/php/etc --enable-fpm --enable-bcmath=shared --with-pdo_sqlite --with-gettext=shared --with-iconv --enable-ftp=shared --with-sqlite3 --enable-mbstring=shared --enable-sockets=shared --enable-soap=shared --with-openssl --with-zlib --with-curl=shared --enable-gd --with-freetype --with-jpeg --with-xpm --with-webp --with-mhash --enable-opcache --with-mysqli --without-pear --with-libdir=lib64 --with-zip --enable-mbstring --enable-pcntl\nmake && make install\n```\n\n> `Codefever` 还需要以下 `PHP 扩展` 才能良好工作，按照下面地址下载并安装\n\n- yaml : https://pecl.php.net/package/yaml\n\n```\n# 安装 php yaml 扩展\ncd yaml-2.x.x\n/usr/local/php/bin/phpize\n./configure --with-php-config=/usr/local/php/bin/php-config\nmake && make install\n```\n\n4. 安装 Git\n\n访问 https://mirrors.edge.kernel.org/pub/software/scm/git/ 下载 `Git v2` 的源码，解压后编译并安装到 `/usr/local/git` 目录下\n\n```\n# 安装 git v2 到 /usr/local/git 目录下\ncd git-2.x.x\n./configure --prefix=/usr/local/git\nmake && make install\n```\n\n连接可执行二进制文件到 `/usr/local/bin` 目录下\n\n```\n# 链接可执行文件\nln -s /usr/local/git/bin/git /usr/local/bin/\n```\n\n5. 安装 Go (无需编译, 二进制安装)\n\n访问 https://golang.google.cn/dl/ 下载 1.16 版本以上的二进制安装包解压后复制到 `/usr/local/go` 目录下\n\n```\n# 复制到 /usr/local\t目录下\ncp -R go /usr/local\n```\n\n连接可执行二进制文件到 `/usr/local/bin` 目录下\n\n```\n# 链接可执行文件\nln -s /usr/local/go/bin/go /usr/local/bin/go\nln -s /usr/local/go/bin/gofmt /usr/local/bin/gofmt\n```\n\n6. 安装 NodeJS (无需编译, 二进制安装, 开发或修改前端页面时使用)\n\n访问 https://nodejs.org/en/download/ 下载 `16.10` 以上 `LTS` 版本二进制安装包解压后复制到 `/usr/local/node` 目录下\n\n```\n# 复制到 /usr/local\t目录下\ncp -R node-v16.x.x-os-arch /usr/local/node\n```\n\n连接可执行二进制文件到 `/usr/local/bin/` 目录下\n\n```\n# 链接可执行文件\nln -s /usr/local/node/bin/node /usr/local/bin/node\nln -s /usr/local/node/bin/npm /usr/local/bin/npm\nln -s /usr/local/node/bin/npx /usr/local/bin/npx\nln -s /usr/local/node/bin/corepack /usr/local/bin/corepack\n```\n\n7. 安装 Yarn\n\n访问 https://yarnpkg.com/getting-started/install 按照页面指导安装 `Yarn`\n\n```\n# NodeJS v16.10 以上打开 corepack 即可使用 Yarn\ncorepack enable\n```\n\n8. 安装 MySQL/MariaDB (无需编译, 镜像源安装)\n\nMySQL 不需要单独安装，直接使用系统自带软件工具安装软件包即可。需要安装于 `MySQL 5.7` 以上的相当版本。\n\n去官网按照指导使用镜像源安装二进制版本 (https://mariadb.org/download/?t=repo-config 选择 `xTom GmbH - San Jose` 镜像)，如果你使用使用云数据库，你可以跳过此步骤。\n\n运行 `service mariadb start` 或 `service mysql start` 启动服务后使用 `mysql_secure_installation` 或 `mariadb-secure-installation` 初始化数据库\n\n*当设置 `root` 密码为 `123456` 时，不需要在下一步中修改 `env.yaml` 中的数据库设置。\n\n如果你使用 `MySQL 5.7` 版本数据，需要修改 `SQL MODE` 变量，否则创建数据库时会报错，如果使用 `MariaDB` 可以忽略此选项。\n\n```\nset global sql_mode='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION';\n```\n\n9. 下载源码并安装\n\n去 `Github` 上下载源码并安装 `/data/www/codefever-comminuty` 目录下\n\n```\nmkdir -p /data/www\ncd /data/www\ngit clone https://github.com/PGYER/codefever.git codefever-community\ncd codefever-community\n```\n\n- 如果 `Github` 的 `HTTP` 服务访问速度较慢，可以尝试使用 `SSH` 服务（需要提前设置 `SSH Key`）\n\n```\ngit clone ssh://git@github.com:PGYER/codefever.git codefever-community\n```\n\n编译 `HTTP` 网关服务\n\n```\ncd /data/www/codefever-community/http-gateway\nexport GO111MODULE=off\nexport GOPROXY=https://mirrors.aliyun.com/goproxy\ngo get gopkg.in/yaml.v2\ngo build main.go\n```\n\n编译 `SSH` 网关服务\n\n```\ncd /data/www/codefever-community/ssh-gateway/shell\nexport GO111MODULE=off\nexport GOPROXY=https://mirrors.aliyun.com/goproxy\ngo get gopkg.in/yaml.v2\ngo build main.go\n```\n\n执行安装脚本\n\n```\ncd /data/www/codefever-community/misc\nsh ./install.sh\n```\n\n按照 `install.sh` 运行后提示修改 `env.yaml` 文件设置参数\n\n运行数据库迁移脚本\n\n```\ncd /data/www/codefever-community/misc\nsh ./create_db.sh\n```\n\n如果你不需要对 Code Fever 进行代码上的修改, 或者将来不计划运行单元测试, 可以删除测试数据\n\n```\ncd /data/www/codefever-community/misc\nsh ./remove_test_data.sh\n```\n\n为服务开启 `chkconfig` 以开机自动运行\n\n```\nchkconfig mariadb on # 或 chkconfig mysql on (根据安装的数据库类型, 如果使用云服务忽略此项目)\nchkconfig sendmail on\nchkconfig nginx on\nchkconfig php-fpm on\nchkconfig codefever on\nchkconfig crond on\n```\n\n尝试访问 `http://127.0.0.1` 或 `http://<server ip>` 来登录\n\n默认管理员用户: `root@codefever.cn`, 密码: `123456`。登录后请修改密码并绑定 MFA 设备。\n\n### 界面预览\n\n![image-20220418184608016](https://ics.iczkj.com/pic/2022/04/18/aaf71720f1d27.png)\n\n![image-20220418184842684](https://ics.iczkj.com/pic/2022/04/18/aeea87c075d3b.png)\n\n![image-20220418184908216](https://ics.iczkj.com/pic/2022/04/18/45e0f2405079b.png)\n\n![image-20220418184931591](https://ics.iczkj.com/pic/2022/04/18/549e79a172487.png)\n\n### 写在最后\n\n其实这款平台非常好用，非常轻量，适合个人使用，美中不足的是不能从其他平台仓库直接克隆项目到本地服务端，只能通过自己手动上传，希望作者以后能增加这个功能。"},{"title":"利用LightHouse和LightDB实现零代码创建和管理API","slug":"DBApi","url":"/2022/04/30/DBApi/","content":"\n## 前言\n\n最近因业务需要创建可以对外查询的API来供其他人使用，但是本人纯小白一枚，不会写相关代码，非常苦恼。而且处于项目初期，没有太多的经费购买服务器，之前了解过服务器的购买流程，对我这种个人来说，真的是很贵了。直到我遇到了LightHouse和LightDB：轻量应用服务器和轻量艺应用数据库。非常适合我这种小白个人开发者，不仅价格实惠，性能也不比服务器差，而且带宽也很高。所以本次教程就用LightHouse和LightDB来进行演示。\n\n## DBApi\n\n### 介绍\n\n- 快速生成数据库的http接口服务，零代码开发，只需编写sql，就可以生成http api服务。是数据库的上层应用，方便数据库数据对外发布http服务。\n\n### 使用场景\n\n- BI报表、数据可视化大屏的后端接口快速开发；\n- 前端程序员快速开发后端接口进行接口联调；\n- 企业数据资产对外快速发布http服务及统一管理；\n- 企业数据接口的统一管理中心。\n\n### 特点\n\n- 开箱即用，不需要编程，不需要依赖其他软件（只需要java运行环境）\n- 支持单机模式、集群模式；支持云原生容器化部署\n- 支持API级别的访问权限控制，支持IP白名单、黑名单控制\n- 支持所有类型数据库（JDBC连接方式），包括mysql/sqlserver/postgreSql/hive/oracle等等\n- 支持动态sql，类似mybatis的动态sql，支持sql编辑、运行、调试\n- 支持API结果缓存，支持缓存开启/关闭（通过插件实现）\n- 支持自定义代码逻辑的数据转换，比如数据脱敏（通过插件实现）\n- 支持API配置导入导出，方便测试环境到生产环境的API迁移\n- 支持一个接口内多条SQL执行（例如分页功能）\n- 支持页面上的API请求测试\n\n项目地址：[DBApi: 零代码开发api服务，只需编写sql，就可以生成http api服务。支持api动态创建，多数据源连接，动态添加数据源，兼容多种数据库。 适用于BI报表、数据可视化大屏的后端接口快速开发 (gitee.com)](https://gitee.com/freakchicken/db-api)\n\n## 开始安装\n\n### 宝塔安装\n\n首先，登录你购买服务器厂商的控制台，我这里用的是腾讯云轻量应用服务器，系统选择的是Centos7.6。\n\n![image-20220213100804144](https://ics.iczkj.com/pic/2022/04/16/a88b9f8c958f5.png)\n\n找到你的服务器之后点击右上角的登录按钮（如果不喜欢这种方式登录可以选择自己喜欢的方式：putty，xshell，terminal 等等）当然如果选用其他方式记得先重置密码还在在购买的时候就创建密码，不然无法登录。\n\n![image-20220213101412208](https://ics.iczkj.com/pic/2022/04/16/f14f3bb534be1.png)\n\n输入管理员指令：sudo -i\n\n![image-20220213101617825](https://ics.iczkj.com/pic/2022/04/16/d7b4b43ac5543.png)\n\n接下来输入命令安装宝塔\n\n```yum\nyum install -y wget && wget -O install.sh http://download.bt.cn/install/install_6.0.sh && sh install.sh\n```\n\nPS：如果没有宝塔账户先去注册一下，注册链接：https://www.bt.cn/?invite_code=MV9obmppdmo=\n\n安装成功后会看到下面的界面：\n\n![image-20220213102136068](https://ics.iczkj.com/pic/2022/04/16/290f2465315a8.png)\n\n接下来我们去防火墙开一下宝塔面板的8888端口：\n\n![image-20220213102422633](https://ics.iczkj.com/pic/2022/04/16/153685d46daa0.png)\n\n然后访问外网链接访问宝塔面板并输入账户密码登录，第一次登录会让你阅读协议并登录宝塔账户（就是刚才注册的）\n\n![image-20220213102748975](https://ics.iczkj.com/pic/2022/04/16/40a4773713f1f.png)\n\n![image-20220213102811156](https://ics.iczkj.com/pic/2022/04/16/4edc3701b0e22.png)\n\n选择LNMP一键安装，PHP版本可以选高一点。\n\n![image-20220213102935618](https://ics.iczkj.com/pic/2022/04/16/e80d3609d6936.png)\n\n### 环境二选一安装\n\nDBApi提供了本地和docker的两种安装方式，每种方式下又有单机版和集群版，因为我这里目前仅有一台轻量应用服务器，所以不做集群版演示，如果各位能赞助我一下，我可能就会出集群版的教程了[狗头]。\n\n#### 本地单机版教程\n\n- 依赖java环境，先自行在服务器安装`jdk8+`，并配置环境变量\n\n我们打开宝塔，点击网站，选Java项目，如未安装jdk会提示安装。\n\n![image-20220416170440949](https://ics.iczkj.com/pic/2022/04/16/413ad7b55aa83.png)\n\n选择8版本点击安装。\n\n![image-20220416171249115](https://ics.iczkj.com/pic/2022/04/16/9e4b1680e1df3.png)\n\n- 下载安装包解压到需要安装的目录[下载链接](https://gitee.com/freakchicken/db-api.git)\n\n![image-20220416173842053](https://ics.iczkj.com/pic/2022/04/16/c6d91374ded74.png)\n\n- 修改`conf/application.properties`文件中的以下配置\n\n```\n# 失败告警邮件的发件人\n# email sender \nspring.mail.host=smtp.163.com\nspring.mail.username=xxx@163.com\nspring.mail.password=xxx\nspring.mail.default-encoding=UTF-8\n\n# 数据源密码加密存储的密钥，至少8位字符\n# key used to encrypt the password of DataSource, at least 8 char\ndbapi.secret.key=12345678\n\n# api访问路径的统一根路径，example: http://192.168.xx.xx:8520/api/xxx\n# api context\ndbapi.api.context=api\n\n# 如果不修改数据库地址将默认使用自带的内嵌元数据库sqlite\n# meta database address\nspring.datasource.driver-class-name=org.sqlite.JDBC\nspring.datasource.url=jdbc:sqlite::resource:sqlite.db\nspring.datasource.username=\nspring.datasource.password=\n```\n\n![image-20220416175832055](https://ics.iczkj.com/pic/2022/04/16/05f6cf65e69e8.png)\n\n- 如果配置了mysql作为元数据库，请先在mysql执行初始化脚本`sql/ddl_mysql.sql`\n\n我这里没有配置，一会会在服务端使用轻量应用数据库。\n\n- Linux一键启停\n\n```\nsh bin/dbapi-daemon.sh start standalone\nsh bin/dbapi-daemon.sh stop standalone\n```\n\n![image-20220416180028217](https://ics.iczkj.com/pic/2022/04/16/1ba74bf75bd42.png)\n\n- 如果是windows操作系统请右键点击`bin/dbapi.ps1`文件，选择使用PowerShell运行\n\n> 注意windows系统只支持standalone模式运行，不支持集群模式\n\n- 浏览器访问`http://ip:8520`进入UI\n\n#### docker单机版教程\n\n首先安装docker\n\n![image-20220416180549331](https://ics.iczkj.com/pic/2022/04/16/f61f488012c0e.png)\n\ndocker部署相对简单，所以现在搭建基本都用docker\n\n> Docker 容器通过环境变量进行配置，附录-环境变量列出了 `DBApi` 的可配置环境变量及其默认值\n\n- 一键启动（使用dbapi自带的元数据库sqlite）\n\n```\ndocker run -it -p 8520:8520 --name dbapi freakchicken/db-api:3.1.0 standalone\n```\n\n![image-20220416181630393](https://ics.iczkj.com/pic/2022/04/16/ad324bcaaf04a.png)\n\n- 使用自己的mysql作为元数据库（启动前需要在mysql执行初始化脚本）\n\n我这里没有使用，一会会在服务端使用轻量应用数据库。\n\n```\ndocker run -it \\\n-p 8520:8520 \\\n-e DB_URL=\"jdbc:mysql://192.168.xx.xx:3306/dbapi?useSSL=false&characterEncoding=UTF-8&serverTimezone=GMT%2B8\" \\\n-e DB_USERNAME=\"root\" \\\n-e DB_PASSWORD=\"root\" \\\n-e DB_DRIVER=\"com.mysql.cj.jdbc.Driver\" \\\nfreakchicken/db-api:3.1.0 standalone\n```\n\n- 浏览器访问`http://ip:8520`进入UI\n\n### 界面预览和使用\n\n![image-20220416181759182](https://ics.iczkj.com/pic/2022/04/16/4b56b820a22c4.png)\n\n默认账号/密码：admin/admin\n\n![image-20220416181846020](https://ics.iczkj.com/pic/2022/04/16/4a343add28c59.png)\n\n![image-20220416181909678](https://ics.iczkj.com/pic/2022/04/16/b128731aa6dd5.png)\n\n![image-20220416182110045](https://ics.iczkj.com/pic/2022/04/16/6faac4c3ae33a.png)\n\n![image-20220416182308219](https://ics.iczkj.com/pic/2022/04/16/f34c9342e7978.png)\n\n![image-20220416182345049](https://ics.iczkj.com/pic/2022/04/16/983d3085170d2.png)\n\n![image-20220416182437911](https://ics.iczkj.com/pic/2022/04/16/bb73ac6f1e7f9.png)\n\n## 附录\n\n###  环境变量\n\n> Docker部署的时候通过以下环境变量来传递参数\n\n| 环境变量        | 默认值                                          | 说明                                  |\n| --------------- | ----------------------------------------------- | ------------------------------------- |\n| MAIL_HOST       | smtp.163.com                                    | 失败告警的邮件发件人                  |\n| MAIL_USERNAME   | [dbapi_test@163.com](mailto:dbapi_test@163.com) | 失败告警的邮件发件人账户              |\n| MAIL_PASSWORD   | WGJQBFRIPUENHMUP                                | 失败告警的邮件发件人密码              |\n| SECRET_KEY      | 12345678                                        | 数据源密码加密存储的密钥，至少8位字符 |\n| API_CONTEXT     | api                                             | 所有API的统一根路径                   |\n| DB_URL          | jdbc:sqlite::resource:sqlite.db                 | 元数据库地址                          |\n| DB_USERNAME     |                                                 | 元数据库账户                          |\n| DB_PASSWORD     |                                                 | 元数据库密码                          |\n| DB_DRIVER       | org.sqlite.JDBC                                 | 元数据库地址jdbc驱动                  |\n| NACOS_ADDRESS   | 127.0.0.1:8848                                  | 集群模式使用的nacos地址               |\n| NACOS_USERNAME  | nacos                                           | 集群模式使用的nacos账户               |\n| NACOS_PASSWORD  | nacos                                           | 集群模式使用的nacos密码               |\n| NACOS_NAMESPACE | public                                          | 集群模式使用的nacos namespace         |"},{"slug":"轻量活动大盘买来吃灰？你应该这么玩","url":"/2022/03/13/轻量活动大盘买来吃灰？你应该这么玩/","content":"# 玩转轻量应用服务器-----Casa OS 数字家庭系统\n\n## 前言\n\n最近，腾讯云又开始了新的整活活动，相信很多小伙伴们都忍不住买了轻量应用服务器和1.6T容量的硬盘，因为真的实在是太便宜了。但是很多小伙伴买来之后不知道要做什么，都在控制台里面吃灰。今天，本橙就教大家如何利用起来，服务器虽然便宜，但也不能买来浪费，赶紧看下面的文章行动起来吧！\n\nPS：如果正在读这篇文章的你还没有购买服务器和云硬盘，并且还想搭建同款的话，可以点击下面的链接进行购买。\n\n[新用户轻量，新老同享云硬盘活动链接](https://curl.qcloud.com/C48kzQMZ)\n\n[新老用户同享轻量应用服务器活动链接](https://curl.qcloud.com/CJHzKx7M)\n\n![image-20220314111405018](https://pic.iczkj.com/pic/2022/03/14/3f844e43e0b3e.png)\n\n## Casa OS 数字家庭系统介绍\n\nCasa OS - 一个简单，易于使用，优雅的开源家庭云系统。\n\nCasa OS是一个基于Docker生态系统的开源家庭云系统，专为家庭场景而设计。致力于打造全球最简单、最易用、最优雅的家居云系统。\n\nIce Whale团队认为，通过社区驱动的协作创新和与全球开发人员的开放沟通，我们可以以前所未有的方式重塑数字家庭体验。\n\n![](https://pic.iczkj.com/pic/2022/03/14/36fbd907475a8.png)\n\n![](https://pic.iczkj.com/pic/2022/03/14/87ae74cb9e1a7.png)\n\n## 开始安装\n\n> ⚠️注意：CasaOS仍处于早期开发阶段，可能会随最终版本而有很大差异。请随时测试运行并在[Discord服务器](https://discord.gg/knqAbbBbeX)中分享您的反馈！\n\n首先，我们要登录我们云服务器所在云服务商的控制台，这里以腾讯云轻量应用服务器为例：\n\n我们要选择的系统镜像为Ubuntu20.04，因为此镜像经过开发人员测试，目前暂无bug，不过本橙使用Centos7.6目前也没有发现问题，如果大家使用期间有任何问题，可以到官网进行反馈。\n\n![选择镜像](https://pic.iczkj.com/pic/2022/03/14/39baed67ec6fe.png)\n\n选择完镜像之后，等待云厂商初始化你的服务器。\n\n之后我们开始登录连接到服务器，博主这里用的是Windows官方开发的terminal工具，大家也可以用自己喜欢的工具，如果没有，用控制台上的web ssh也是可以的。\n\n![image-20220314113829783](https://pic.iczkj.com/pic/2022/03/14/5af941f614c01.png)\n\n在我们登录之后，无论你用的是什么系统，尽量都要用root用户的身份去执行命令，不然有可能会执行失败。\n\n![image-20220314114247797](https://pic.iczkj.com/pic/2022/03/14/ff73dcd6e99fa.png)\n\nCasa OS安装命令：\n\n```\nwget -qO- https://get.icewhale.io/casaos.sh | bash\n```\n\n或\n\n```\ncurl -fsSL https://get.icewhale.io/casaos.sh | bash\n```\n\nCasa OS卸载命令：\n\n```\ncurl -fsSL https://get.icewhale.io/casaos-uninstall.sh | bash\n```\n\n![image-20220314114548490](https://pic.iczkj.com/pic/2022/03/14/f3218c5a0a893.png)\n\n当你看到满屏飘绿的时候，那么恭喜你，你安装成功了！\n\n![image-20220314114755270](https://pic.iczkj.com/pic/2022/03/14/870d1e3534c39.png)\n\n我们可以看到的是，下面他给出了你的Casa OS内网的访问IP，你用你服务器对应的公网访问是具有同样效果的。\n\nPS：值得一提的是，如果你的服务器正在运行着其他项目并占用了80端口，Casa OS会随机分配一个你没有在使用的端口，他同样会显示在下面的IP后面，这时，你就需要访问IP:端口来访问你的系统了。如果你用的是服务器的话（本文示例：腾讯云轻量应用服务器），记得去控制台防火墙打开相应的端口，不然会拒绝你的访问。\n\n## 开始使用\n\n使用你的IP或者IP端口在浏览器种访问，当然，你也可以去配置域名和ssl证书。\n\n![image-20220314115315370](https://pic.iczkj.com/pic/2022/03/14/050e76bb45ba0.png)\n\n点击开始，用以设置用户名和密码：\n\n![image-20220314115351717](https://pic.iczkj.com/pic/2022/03/14/981226ee29c80.png)\n\n创建之后一切就绪，会显示你的Casa OS系统界面。\n\n![image-20220314115505958](https://pic.iczkj.com/pic/2022/03/14/5dac334a6ea6b.png)\n\n![image-20220314115613170](https://pic.iczkj.com/pic/2022/03/14/fe9ecc21d85dc.png)\n\n目前该系统可以只需三个步骤即可快速安装 Docker 应用，外加自动管理应用。\n\n让你管理你的 Docker 应用更加简单便捷，目前apps市场里面拥有较常用的docker app，其他应用市场没有的应用，只需要知道其在docker hub的名字便可便捷安装并进行可视化管理。\n\n看到这里，你可能会说，这确实用到服务器了，可是我的大容量轻量云硬盘还在吃灰啊！别急，让我们先创建一些docker 应用。\n\n![image-20220314120647267](https://pic.iczkj.com/pic/2022/03/14/7855b27164188.png)\n\n我们可以看到，应用中心里面还是有很多应用的，本橙的食用方法就是一个next cloud作为网盘使用，平时做个项目分享，团队协作什么的，宽带和容量都是够用的。\n\n除此之外，我还搭配了 qBittorrent 用来下载一些文件，这样就不必让自己的电脑一直开机去等待下载了。\n\n还可以使用jellyfin emby等流媒体服务，搭建自己家庭的流媒体服务站（PS：一定要注意版权）\n\n![image-20220314121711184](https://pic.iczkj.com/pic/2022/03/14/d46505d62e956.png)\n\n![image-20220314121746834](https://pic.iczkj.com/pic/2022/03/14/f8155f896ebdf.png)\n\n![image-20220314121804522](https://pic.iczkj.com/pic/2022/03/14/afb7f000bd69a.png)\n\n![image-20220314121828117](https://pic.iczkj.com/pic/2022/03/14/26d6833b09a5c.png)\n\n## 结语\n\n本项目其实还有其他好玩的地方，等着你们自己来发掘，快来一起玩耍吧！\n\nPS： Casa OS仍处于早期开发阶段，可能会随最终版本而有很大差异。请随时测试运行并在[Discord服务器](https://discord.gg/knqAbbBbeX)中分享您的反馈！\n\n- 专为家庭场景设计的 UI - 简单、优雅且易于使用\n- 只需三个步骤即可快速安装 Docker 应用，外加自动管理\n- 适用于家庭云的应用商店\n- 家庭数据/数字资产管理\n- 智能家居经理\n- 正在开发中\n"},{"slug":"ip漏洞扫描工具","url":"/2021/11/06/ip漏洞扫描工具/","content":"# 服务器漏洞扫描系统的简单搭建\n\n## 项目介绍\n\n这是一款开源的资产巡航扫描系统。系统定位是通过`masscan+nmap`无限循环去发现新增资产，自动进行端口弱口令爆破、指纹识别、`XrayPoc`扫描。主要功能包括: `资产探测`、 `端口爆破`、 `Poc扫描`、 `指纹识别`、 `定时任务`、 管理后台识别、 报表展示。 通过Docker搭建好之后，设置好你要扫描的网段跟爆破任务，就不需要去操作其他的事情了，没事的时候过来收漏洞就行了。\n\n## 功能清单\n\n- masscan+namp巡航扫描资产\n\n- 创建定时爆破任务(FTP/SSH/SMB/MSSQL/MYSQL/POSTGRESQL/MONGOD)\n- 管理后台识别\n- 结果导出\n- 报表展示\n- docker一键部署\n- CMS识别 - 结合威胁情报、如果某个CMS爆出漏洞，可以快速定位企业内部有多少资产\n- poc扫描 - 调用xray的Poc,对新发现的资产自动扫描poc\n\n**管理后台识别**\n\n不论甲方乙方。大家在渗透一个网站的时候，很多时候都想尽快找到后台地址。linglong对自己的资产库进行Title识别。然后根据title关键字、url关键字、body关键字(比如url中包含login、body中包含username/password)进行简单区分后台。帮助我们渗透中尽快锁定后台。\n\n**指纹识别**\n\n系统会对新发现的资产进行一遍指纹识别, 也可以手动新增指纹。比如某个CMS爆出漏洞，新增指纹扫描一遍系统中存在的资产。可以快速定位到漏洞资产，对于渗透打点或者甲方应急都是极好的。\n\n**POC扫描**\n\n对于任何一个扫描系统，poc扫描都是必不可少的。但是poc的更新一直是所有开源项目面临的一个问题。综合考虑用Xray的poc,感谢Xray对安全圈做出的贡献！linglong会对每次新发现的资产进行一遍Xray的Poc扫描。如果发现漏洞会自动入库，可以可视化查看漏洞结果。\n\n**资产巡航更新**\n\nmasscan可以无限扫描，但是对于失效资产我们也不能一直保存。linglong通过动态设置资产扫描周期，对于N个扫描周期都没有扫描到的资产会进行删除。保存资产的时效性。\n\n## 预览\n\n![img](https://pic.iczkj.com/pic/2021/11/06/d36ae00634aa1.png)\n\n![img](https://pic.iczkj.com/pic/2021/11/06/fd9c4f1a4dbf8.png)\n\n![img](https://pic.iczkj.com/pic/2021/11/06/9a34351e3fc6a.png)\n\n![img](https://pic.iczkj.com/pic/2021/11/06/19e447c7adacf.png)\n\n![img](https://pic.iczkj.com/pic/2021/11/06/48f2907117f4c.png)\n\n## 开始搭建\n\n首先打开服务器控制台，登录云服务器（什么？你还没有服务器？购买链接放在这里了，[有需要的点开链接购买](https://curl.qcloud.com/WovkPlOc) ）。\n\n![image-20211106152631735](https://pic.iczkj.com/pic/2021/11/06/40d24c4020387.png)\n\n![image-20211106152712314](https://pic.iczkj.com/pic/2021/11/06/5b491926960ed.png)\n\n### 安装docker\n\n在控制台输入下面的命令来安装docker，因为我们这次要搭建的项目是在docker中运行的。\n\n```dockerfile\nsudo yum update -y\ncurl -sSL https://get.daocloud.io/docker | sh\nsudo systemctl start docker\nsudo systemctl status docker\nsudo systemctl enable docker\n```\n\n![image-20211106153157954](https://pic.iczkj.com/pic/2021/11/06/e8481daa25683.png)\n\n当看到下面的内容出现就代表你安装成功了~\n\n![image-20211106153414797](https://pic.iczkj.com/pic/2021/11/06/5f8f58aa7121b.png)\n\n接下来安装漏洞扫描项目：\n\n1.克隆拉取项目：\n\n运行下面的命令：\n\n```git\ngit clone https://github.com/awake1t/linglong\n```\n\nPS：如果你的服务器没有安装`git`要先运行下面的命令安装一下`git`\n\n```yum\nyum install git\n```\n\n![image-20211106155203053](https://pic.iczkj.com/pic/2021/11/06/00c6a41fc2ef7.png)\n\n输入Y即可安装成功。\n\n![image-20211106155258611](https://pic.iczkj.com/pic/2021/11/06/4f1b461c890fa.png)\n\n正在拉取项目中的状态。\n\n接下来输入`cd linglong`进入项目文件夹中。\n\n然后输入`docker-compose up -d`来运行项目。\n\n出现下面的界面就说明你安装成功了：\n\n![image-20211106160431150](https://pic.iczkj.com/pic/2021/11/06/6fc478c937a90.png)\n\n为了保险起见，输入`docker container ls -a`来验证是否运行正常。\n\n出现下面的界面代表正常没有问题：\n\n![image-20211106160644949](https://pic.iczkj.com/pic/2021/11/06/98c85339f58f7.png)\n\n至此项目就安装完成了，下面我们来进行后台的一些配置。\n\n如果你用的是腾讯云等带有防火墙的厂商，记得去控制台打开防火墙`8001`端口。\n\n因为我用的是腾讯云，所以介绍一下腾讯云端口的配置方法：\n\n进入控制台，点击防火墙。\n\n![image-20211106164401757](https://pic.iczkj.com/pic/2021/11/06/3f99223bec4cc.png)\n\n![image-20211106164450355](https://pic.iczkj.com/pic/2021/11/06/41138db1025ac.png)\n\n这样我们就可以通过`ip:8001`访问项目的后台管理端了。\n\n默认账号和密码：\n\n账号:linglong \n\n密码:linglong5s\n\n| 类型        | 用户名   | 密码       |\n| ----------- | -------- | ---------- |\n| Web账号     | linglong | linglong5s |\n| mysql数据库 | root     | linglong8s |\n\n**注: 首次运行在设置里修改扫描的网段范围,点击保存后就行了**  然后耐心等待系统自动扫描，扫描耗时您配置的网段+端口+速率会有变化\n\n```\ngit clone https://github.com/awake1t/linglong\ncd linglong/web\n\n# 把 YourServerIp 换成你的IP地址\nsed -i 's#http://127.0.0.1:18000#http://YourServerIp:18000#g' ./dist/js/app.4dccb236.js && sed -i 's#http://127.0.0.1:18000#http://YourServerIp:18000#g' ./dist/js/app.4dccb236.js.map\n\n\n# 重要！！！ 如果之前安装过，使用如下命令删除所有名字包含linglong的历史镜像\ndocker rmi $(docker images | grep \"linglong\" | awk '{print $3}') \n\n\n# 返回到 linglong的目录下\ncd ../\ndocker-compose up -d\n\n一般这时候就部署好了,如果访问不了. 要确认下服务器上安全组的8001和18000有没有打开.\n```\n\n"},{"slug":"良心云免费送轻量服务器啦","url":"/2021/09/24/良心云免费送轻量服务器啦/","content":"# 良心云一周年福利免费送轻量服务器啦\n\n在说活动之前，小生我想先讲一讲这些日子对腾讯云的使用体验，如果大家只想参加活动，那么可以直接跳转到最下面~\n\nPS：免费领取服务器是老用户专享，不过文中也有新用户福利，敬请留意~\n\n## 腾讯云轻量应用服务器一周年\n\n就在昨天，2021-09-23日，腾讯云轻量正式上架售卖刚刚好一周年。\n\n虽然我轻量应用服务器才用了9个多月，但我接触腾讯云要有一年多了，接触云服务有两年了。本人最一开始只是一名什么都不懂的非计算机专业学生。最初搭建博客是用的静态hexo搭建在GitHub上面，但是因为访问速度太慢而放弃。这期间也用过阿里云的学生机，还有其他一些小厂商的vps。但是我后来选择了腾讯云，不单单是因为他在业界被称为良心云，而是对于我的使用体验和价格输出。\n\n## 为什么我选择了腾讯云\n\n### 一、使用体验\n\n腾讯云不像其他厂商只注重企业客户而忽略个人用户，对于个人和小白用户，腾讯云的操作界面间接而且美观。对于小白，有相关的操作指引，使用起来非常方便。对于技术上的问题，工单相应的也是非常快，不会像其他云厂商解决工单还要收费。腾讯云的售后也非常好，记得之前因为一个技术问题无法解决，已经是深夜了，但还是有技术人员相应了我的工单，虽然这名技术人员不擅长这个问题，负责这方面的技术 已经下班了，然后我加上了相关技术微信，第二天一上班就给我解决了，非常的nice，在这里点个赞！\n\n### 二、社区氛围\n\n一个完整的云服务器厂商也应该具备相关的云社区，腾讯云在这方面做的非常好。强大全面的云＋社区依赖于性能优越的腾讯云服务器，得以让众多用户参与其中，交流在使用云服务器时的问题和心得，让用户可以了解到云服务相关知识，对于像我这样的小白简直不要太友好！\n\n### 三、售卖价格\n\n这个相信是很多人最关注的，一台性能好的服务器自然是关键，但是咱钱包撑不住啊！\n\n![](https://pic.iczkj.com/pic/2021/09/24/e967611efc455.jpg)\n\n腾讯云轻量应用服务器不仅价格非常实惠，价格仅为正常CVM的50%，但是很多人肯定会问，便宜这么多，是不是性能有问题？\n\n这个广大开发者朋友们尽管放心，腾讯云轻量应用服务器团队承诺不会研发突发性能实例，便宜的同时让大家用的放心。那你会问了，那既然没有什么区别，那为什么便宜呀？\n\n这个其实是腾讯云对广大个人开发者的一个福利，适用于中低并发量的个人开发者，下面我把CVM和Lighthouse的官方对比放在下面供大家参考。\n\n![image-20210924191758412](https://pic.iczkj.com/pic/2021/09/24/abc9a72029b2c.png)\n\n目前腾讯云官网对于轻量新用户也有很大的优惠，欢迎访问链接购买：[轻量应用服务器](https://curl.qcloud.com/1I2k9h7D)\n\n感谢您听我说了这么多，下面就是免费领取服务器的活动了！\n\n## 轻量产品上线一周年老用户回馈\n\n有很多用户都在抱怨，说大厂的活动都是老用户与🐕不得入内。今天，腾讯云轻量推出老用户专属福利：良心云轻量应用服务器一周年 老用户可以免费领取2核4G6M轻量应用服务器 一年有效\n\n是不是感觉瞬间热血沸腾，那就赶快扫描下方二维码领取吧！\n\n![ef60c64876d160b489fdd0920d9b0d68](https://pic.iczkj.com/pic/2021/09/24/8e30b6316a895.png)"},{"slug":"为简历而发愁吗，来看看这个免费实用的工具","url":"/2021/09/04/为简历而发愁吗，来看看这个免费实用的工具/"},{"slug":"腾讯云聊天室Fiora","url":"/2021/08/27/腾讯云聊天室Fiora/","content":"这是基于fiora开源系统搭建的一个即时在线聊天室，使用宝塔面板搭建。只需一键注册即可享受在线聊天的乐趣。\n\n\n### 前言\n\n本项目基于腾讯云轻量搭建，目前腾讯云启动了无忧计划，超级划算，欢迎大家选购~  购买链接：[无忧计划](https://curl.qcloud.com/1I2k9h7D)\n\n![wuyou](https://pic.iczkj.com/pic/2021/08/27/36fd2aa3c1d3f.png)\n\n### Fiora\n\nFiora聊天室是基于node.js和react由碎碎酱独自开发的开源网页聊天室,使用socket.io模块WebSocket协议通讯,支持Service Worker和PWA.功能丰富,并且简单易上手,很适合作为学习node.js的参考项目,node.js初学者的福音。\n\n项目地址: \n\n\nhttps://github.com/yinxin630/fiora\n\n### 宝塔安装Fiora\n\n1. 自我安装好宝塔。\ncentos安装命令,其余系统请参见官网\n\n```yaml\nyum install -y wget && wget -O install.sh http://download.bt.cn/install/install_6.0.sh && sh install.sh\n```\n\n2. 在 软件商店 安装好PM2管理器、MongoDB、Redis，三个应用。\n\n![](https://pic.iczkj.com/pic/2021/08/27/1c6120a56c1a5.png)\n\n3. 如有外部安全防火墙 请预先开放9200端口，宝塔开启9200端口。\n\n\n4. ssh连接服务器\n\n先测试下环境是否正常 没有的退出重新连接SSH\n\n\n```node\nnode -v\nnpm -v\n```\n\n拉取源码并存放于/opt文件夹 如果没有git请 \n\n```yum\nyum -y install git\n```\n\n\ngit clone https://github.com/yinxin630/fiora.git -b master /opt/fiora\n\n\n进入文件夹\n\n\n```cd\ncd /opt/fiora\n```\n\n安装依赖，这里不能用npm，需要用yarn来安装\n\n```npm\nnpm i -g yarn\nyarn\n```\n\n构建和转移产物\n\n\n```npm\nnpm run build:client && npm run move-dist\n```\n\n启动\n\n\n```npm\nnpm start\n```\n\n注册用户\n打开  `http://你服务器ip:9200` 注册第一个用户: admin\n\n\n接下来配置管理员和开机自启 ，先使用Ctrl+C断开运行。\n\n先给node做个软连接，不然后面会启动失败\n\n\n```yaml\nln -sf $(which node) /usr/bin/node\n```\n\n获取用户userid 比如admin\n\n\n```yarn\nyarn script getUserId admin\n```\n\n设置管理员 替换下面红色的内容成上面取到的Userid\n\n`export Administrator=内容 Port=9200`\n\n [typing]以下命令一起复制进SSH客户端运行[/typing] \n\n\ncat > /etc/systemd/system/fiora.service <<EOF\n[Unit]\nDescription=fiora\nAfter=network.target\nWants=network.target\n\n[Service]\nType=simple\nPIDFile=/var/run/fiora.pid\nExecStart=$(command -v npm) start\nWorkingDirectory=/opt/fiora\nEnvironment=NODE_ENV=production Administrator=$Administrator Port=$Port\nUser=root\nRestart=on-failure\nRestartSec=42s\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\n设置开机启动\n\n`systemctl start fiora`\n\n [typing]在开机时启用服务[/typing] \n\n`systemctl enable fiora`\n\n至此重启，可使管理员权限生效。下面是其它参考内容，如修改fiora内容,往往需要重构才能生效。\n\n\n在开机时禁用服务(此命令不用，仅参考。)\n\nsystemctl disable fiora\n\n重构(此命令不用，仅参考。)\n\nnpm script build:client\n\n### 域名反代\n\n如需要加证书，申请/更换ssl时需关闭域名反代。\n\n1. 宝塔面板里面，先点击左侧网站，添加站点，然后再点击添加好了的域名\n\n2. 网址 - 域名 - 设置- 反向代理 - 增加反向代理\n\n3. 目标URL `http://127.0.0.1:9200`\n\n打开你的域名，就可以看到Fiora在运行了。\n\n其它的设置事项，请参考官方说明。\n\n### 一些修正\n\n1.套cdn不能注册新用户\n\n进入 opt\\fiora\\server\\routes\\user.ts 注释第85 86行。\n\n// const hasRegisteredWithin24Hours = await Redis.has(getNewRegisteredUserIpKey(ctx.socket.ip));\n\n//assert(!hasRegisteredWithin24Hours, '系统错误');\n\n2.缓存问题 如修改后 ip:9200 访问正常 域名访问还是旧文件\n\n关闭 反向代理的 开启缓存\n\n删除反向代理-->配置文件里 expires 12h; \n\n清空 /www/server/nginx/proxy_cache_dir/ 夹里文件\n\n清空 /www/server/nginx/proxy_temp_dir/ 夹里文件\n\n如有cdn 也需要清除cdn缓存\n\n强制刷新/清空浏览器缓存 重新访问\n\n### DIY\n\nlogo:\n\n/opt/fiora/public/favicon-96.png\n\n/opt/fiora/public/favicon-192.png\n\n/opt/fiora/public/favicon-512.png\n\n \n\nindex.html\n\n/opt/fiora/client/templates/index.html\n\n \n\n侧边\n\n/opt/fiora/client/modules/Sidebar/\n\n### 安全\n\n\nhttps://github.com/yinxin630/fiora/blob/master/doc/INSTALL.ZH.md\n\n请按项目配置里提到的方法，在fiora根目录，新建 .env文件 \n\n修改JwtSecret的值\n"},{"slug":"一款非常适合信息传递的工具——PasteMe","url":"/2021/08/24/一款非常适合信息传递的工具——PasteMe/","content":"# 一款非常适合信息传递的工具——PasteMe\n\n## 前言\n\n### PasteMe 是什么\n\nPasteMe 是一个无需注册的文本分享平台，针对代码提供了额外的高亮功能。\n\n### 背景\n\n- 如果你要发布一个脚本，可以把 `Bash` 或者 `Python` 等脚本上传至 `PasteMe` ，然后通过 `curl` 和管道机制来进行优雅的发布，比如：`curl api.pasteme.cn/8219 | python3`\n- 如果你要发给某人一些私密的信息，比如一段 `token`，但是通过 QQ 、微信等聊天工具可能会被 “查水表”，你可以将私密信息以阅后即焚形式上传至 `PasteMe` ，将一次性链接分享给别人，别人查看一次之后这个链接就会失效\n- 想要向服务器内粘贴一段代码，但是苦于字符集，复制、上传上去之后有其它的字符，此时你可以上传至 `pasteme` ，然后通过 `wget api.pasteme.cn/<key> -O file_name` 来进行优雅的拉取\n- 新装了一台没有图形化界面的服务器，没开 `sshd` 服务，没有可用的编辑器去编辑 `sources.list` 文件，直接用默认源安装一个编辑器又太慢，此时可以用 `curl api.pasteme.cn/<key> > /etc/apt/sources.list` 或 `wget api.pasteme.cn/<key> -O /etc/apt/sources.list` 来更新 `apt` 源，然后进行优雅的 `apt update`\n- 阅后即焚的链接是可以自定义的，比如 [pasteme.cn/example](https://pasteme.cn/example) ，更多详情请查看 [使用文档](https://docs.pasteme.cn/#/documentation)\n\n### 功能\n\n- 在存储内容时，**设置密码**和**阅后即焚**可以高度保证用户内容的安全性和私密性。\n- 在将自己的内容分享给别人时，提供了一键复制链接和二维码分享等多种途径。\n- 在查看别人的内容时，可以一键复制所有文本。如果查看的是阅后即焚的内容，那么在网页加载完成之前，实体数据就已经不存在了。\n\n## 效果展示\n\n![68747470733a2f2f63646e2e6a7364656c6976722e6e65742f67682f506173746555732f43444e40302e302e31322f73637265656e73686f742f70617374656d652f6d61726b646f776e5f736f757263652e706e67](https://pic.iczkj.com/pic/2021/08/25/2d9ce073ff54b.png)\n\n![68747470733a2f2f63646e2e6a7364656c6976722e6e65742f67682f506173746555732f43444e40302e302e31322f73637265656e73686f742f70617374656d652f6d61726b646f776e5f7061727365642e706e67](https://pic.iczkj.com/pic/2021/08/25/2d4bc9d35cb77.png)\n\n![68747470733a2f2f63646e2e6a7364656c6976722e6e65742f67682f506173746555732f43444e40302e302e31322f73637265656e73686f742f70617374656d652f686f6d652e706e67](https://pic.iczkj.com/pic/2021/08/25/2be8c3afb23ec.png)\n\n![68747470733a2f2f63646e2e6a7364656c6976722e6e65742f67682f506173746555732f43444e40302e302e31322f73637265656e73686f742f70617374656d652f7172636f64652e706e67](https://pic.iczkj.com/pic/2021/08/25/34417eae74e10.png)\n\n![68747470733a2f2f63646e2e6a7364656c6976722e6e65742f67682f506173746555732f43444e40302e302e31322f73637265656e73686f742f70617374656d652f726561645f6f6e63652e706e67](https://pic.iczkj.com/pic/2021/08/25/ad96377be4804.png)\n\n![68747470733a2f2f63646e2e6a7364656c6976722e6e65742f67682f506173746555732f43444e40302e302e31322f73637265656e73686f742f70617374656d652f737563636573732e706e67](https://pic.iczkj.com/pic/2021/08/25/129a647cfd553.png)\n\n## 安装步骤\n\n### 准备事项\n\n首先，你要拥有一台云服务器，这里购买的是腾讯云的轻量应用服务器。专属优惠购买连接：[轻量应用服务器Lighthouse](https://curl.qcloud.com/1I2k9h7D)。新老用户同享！\n\n新用户超大额优惠：[1核2G一年仅需74元](https://curl.qcloud.com/WCaPKCrv)\n\n![img](https://pic.iczkj.com/pic/2021/08/23/6d437849a965e.jpeg)\n\n### 镜像选择\n\n![image-20210823123945478](https://pic.iczkj.com/pic/2021/08/23/0ff06fe5b2f38.png)\n\n购买之后等待初始化。\n\n初始化完成之后登录控制台。\n\n![image-20210823155600163](https://pic.iczkj.com/pic/2021/08/23/0780958daae2d.png)\n\n### 环境配置\n\n输入`sudo /etc/init.d/bt default`来查看默认登录账号和密码。\n\n![image-20210823160842540](https://pic.iczkj.com/pic/2021/08/23/8b652597660e4.png)\n\n然后在你的浏览器里面输入`IP:8888/tencentcloud`访问宝塔面板。\n\n这时你还要去防火墙开一下8888端口，不然服务器会拒绝你的访问。\n\n![image-20210823161103474](https://pic.iczkj.com/pic/2021/08/23/c0c15f6e98436.png)\n\n登录成功后会跳出提示框，点击安装\n\n![image-20210823161655152](https://pic.iczkj.com/pic/2021/08/23/56c4fbb62d571.png)\n\n等待一段时间过后安装成功。\n\n然后我们来到软件商店的运行环境选项卡，找到docker并安装。（你问我为什么不直接使用docker镜像，一是因为那个版本比较低，二是因为后续许多配置都需要宝塔来完成）\n\n![image-20210825112715387](https://pic.iczkj.com/pic/2021/08/25/f83c95a7987e3.png)\n\ndocker安装成功后我们来安装`docker-compose`。在宝塔终端或者腾讯云控制台登录服务器执行下列命令：\n\n1. 下载最新版的docker-compose文件 \n\n```\nsudo curl -L https://github.com/docker/compose/releases/download/1.16.1/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose\n```\n\n2. 若是github访问太慢，可以用daocloud下载\n\n```\nsudo curl -L https://get.daocloud.io/docker/compose/releases/download/1.25.1/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose\n```\n\n3. 添加可执行权限\n\n```\nsudo chmod +x /usr/local/bin/docker-compose\n```\n\n4. 测试安装结果\n\n```\ndocker-compose --version\n```\n\n显示`docker-compose version 1.16.1, build 1719ceb`即为安装成功。\n\n![image-20210825115418610](https://pic.iczkj.com/pic/2021/08/25/eb4d4db7045b4.png)\n\n到此我们的环境就配置好了，接下来开始项目的安装。\n\n### 项目安装\n\n下载 [PasteMe/docker-compose.yml](https://cdn.jsdelivr.net/gh/LucienShui/PasteMe@main/docker-compose.yml)，然后执行 `docker-compose up -d`\n\n```bash\nwget https://cdn.jsdelivr.net/gh/LucienShui/PasteMe@main/docker-compose.yml\ndocker-compose up -d\n```\n\n![image-20210825134816488](https://pic.iczkj.com/pic/2021/08/25/e33a947c195d0.png)\n\n命令执行完成后等待 `30s`（因为需要初始化数据库和等待 `healthy check`），然后运行 `docker ps -a`，当看到所有的容器的状态没有 `unhealthy` 或 `Exited (x) xxx` 就代表 PasteMe 已经启动成功\n\n### 更新\n\n```bash\ndocker-compose pull\ndocker-compose up -d\n```\n\n### 文件夹介绍\n\n第一次执行完 `docker-compose up -d` 之后，会出现一个名为 `data` 的文件夹，其中有四个文件夹。\n\n| 文件夹名         | 备注                     |\n| ---------------- | ------------------------ |\n| `backend-config` | 后端的配置文件           |\n| `frontend-user`  | 前端的配置文件和用户文件 |\n| `nginx-logs`     | 前端 Nginx 的日志文件    |\n| `mysql`          | MySQL 的持久化文件       |\n\n### 日志\n\n- 前端 `Nginx` 日志位于 `data/nginx-logs` 下\n- 后端日志通过 `docker logs pasteme-backend` 查看\n- 数据库日志通过 `docker logs pasteme-mysql` 查看\n\n## 结束\n\n到这里这款信息传递工具就完成啦，快和你的小伙伴们一起交流吧！\n"},{"title":"还在为不想运动而发愁吗——一款开源免费的运动记录项目","slug":"还在为不想运动而发愁吗——一款开源免费的运动记录项目","url":"/2021/08/23/还在为不想运动而发愁吗——一款开源免费的运动记录项目/","content":"\n## 前言\n\n现在信息日益增长、时间日益碎片化的时代，每个人都很难去坚持去一直认真做一件事情。\n\n就拿跑步来说，许多人都是三分钟热度，根本坚持不下来。许多程序员在电脑面前一坐就是一整天，很少去锻炼、跑步。\n\n对于这些人来说影响因素有很多，有无法坚持，有懒惰，也有的说没有一款好看的运动记录界面......\n\n现在，这些都不是借口了！我这里给大家带来了一款非常炫酷的运动记录界面，不仅可以自己欣赏，还可以把他发给别人，和大家一起共同见证你的跑步运动锻炼经历~\n\n那有人说，在向其他人展示的时候我只想展示历程，并不像展示轨迹，因为我很注重隐私，没关系！这个程序自带模糊处理功能！如果你不想公开数据，可以选择 strava 的模糊处理，或 private 仓库。\n\n## 特性\n\n1. GitHub Actions 管理自动同步跑步进程及自动生成新的页面\n2. Gatsby 生成的静态网页，速度快\n3. 支持 Vercel(推荐) 和 GitHub Pages 自动部署\n4. React Hooks\n5. Mapbox 进行地图展示\n6. Nike 及 Runtastic(Adidas Run) 以及佳明（佳明中国）及 Keep 等, 自动备份 gpx 数据，方便备份及上传到其它软件\n\n> 因为数据存在 gpx 和 data.db 中，理论上支持几个软件一起，你可以把之前各类 app 的数据都同步到这里（建议本地同步，之后 actions 选择正在用的 app）\n\n> 注: 如果你不想公开数据，可以选择 strava 的模糊处理，或 private 仓库。\n\n## 展示图\n\n### GIF\n\n![](https://pic.iczkj.com/pic/2021/08/23/b4915606aa03e.gif)\n\n ### 地图彩蛋\n\n![95644909-a31bcd80-0aec-11eb-9270-869b0a94f59f](https://pic.iczkj.com/pic/2021/08/23/676926f15b7e2.png)\n\n### 工作原理\n\n![105784027-e1ad9900-5fb2-11eb-9479-372be21482f1](https://pic.iczkj.com/pic/2021/08/23/193305726fa72.png)\n\n你说你看不懂工作原理？没关系！接下来手把手带你操作，让你也能拥有炫酷的个人运动记录页面。\n\n## 安装步骤\n\n### 准备事项\n\n首先，你要拥有一台云服务器，这里购买的是腾讯云的轻量应用服务器。专属优惠购买连接：[轻量应用服务器Lighthouse](https://curl.qcloud.com/1I2k9h7D)。新老用户同享！\n\n新用户超大额优惠：[1核2G一年仅需74元](https://curl.qcloud.com/WCaPKCrv)\n\n![img](https://pic.iczkj.com/pic/2021/08/23/6d437849a965e.jpeg)\n\n### 镜像选择\n\n![image-20210823123945478](https://pic.iczkj.com/pic/2021/08/23/0ff06fe5b2f38.png)\n\n购买之后等待初始化。\n\n初始化完成之后登录控制台。\n\n![image-20210823155600163](https://pic.iczkj.com/pic/2021/08/23/0780958daae2d.png)\n\n### 环境配置\n\n输入`sudo /etc/init.d/bt default`来查看默认登录账号和密码。\n\n![image-20210823160842540](https://pic.iczkj.com/pic/2021/08/23/8b652597660e4.png)\n\n然后在你的浏览器里面输入`IP:8888/tencentcloud`访问宝塔面板。\n\n这时你还要去防火墙开一下8888端口，不然服务器会拒绝你的访问。\n\n![image-20210823161103474](https://pic.iczkj.com/pic/2021/08/23/c0c15f6e98436.png)\n\n登录成功后会跳出提示框，点击安装\n\n![image-20210823161655152](https://pic.iczkj.com/pic/2021/08/23/56c4fbb62d571.png)\n\n等待一段时间过后安装成功。\n\n点击网站：\n\n![image-20210823170220226](https://pic.iczkj.com/pic/2021/08/23/338a7e4b26b20.png)\n\n点击添加站点：\n\n![image-20210823170349674](https://pic.iczkj.com/pic/2021/08/23/43804a6dad61c.png)\n\n按提示添加好个人域名等相关信息。\n\n![image-20210823170524141](https://pic.iczkj.com/pic/2021/08/23/ceb2a74807803.png)\n\n### 项目安装\n\n进入网站目录点击远程下载，输入仓库下载地址命令：\n\n`https://github.com/yihong0618/running_page.git`\n\n![image-20210823170809625](https://pic.iczkj.com/pic/2021/08/23/526155377ff96.png)\n\n然后在此页面点击打开终端。\n\n并依次输入下列命令。\n\n```\npip3 install -r requirements.txt\nyarn install\nyarn develop\n```\n\n然后访问域名:8000或者`IP:8000`访问即可。\n\n## 替换 `src/utils/const.js` 文件中的 Mapbox token\n\n> 建议有能力的同学把代码中的 Mapbox token 自己的 [Mapbox token](https://www.mapbox.com/)\n\n```\nconst MAPBOX_TOKEN =\n  'pk.eyJ1IjoieWlob25nMDYxOCIsImEiOiJja2J3M28xbG4wYzl0MzJxZm0ya2Fua2p2In0.PNKfkeQwYuyGOTT_x9BJ4Q';\n```\n\n如果你是海外用户请更改 `IS_CHINESE = false` in `src/utils/const.js`\n\n## 一些个性化选项\n\n在仓库目录下找到 `gatsby-config.js`，找到以下内容并修改成你自己想要的。\n\n```\nsiteMetadata: {\n  siteTitle: 'Running Page', #网站标题\n  siteUrl: 'https://yihong.run', #网站域名\n  logo: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQTtc69JxHNcmN1ETpMUX4dozAgAN6iPjWalQ&usqp=CAU', #左上角LOGO\n  description: 'Personal site and blog',\n  navLinks: [\n    {\n      name: 'Blog', #右上角导航名称\n      url: 'https://yihong.run/running', #右上角导航链接\n    },\n    {\n      name: 'About',\n      url: 'https://github.com/yihong0618/running_page/blob/master/README-CN.md',\n    },\n  ],\n},\n```\n\n更多功能请参见官方文档：[官方文档](https://github.com/yihong0618/running_page/blob/master/README-CN.md#garmin-cn-%E5%A4%A7%E9%99%86%E7%94%A8%E6%88%B7%E8%AF%B7%E7%94%A8%E8%BF%99%E4%B8%AA)\n\n[演示站点](https://yihong.run/)\n\n最后，快去运动并记录吧！并和你的朋友一起分享记录的快乐~\n\n"},{"slug":"青龙面板和Ninja的安装方法","url":"/2021/08/20/青龙面板和Ninja的安装方法/","content":"[青龙2.8+Ninja扫码安装教程](https://txaff.com/index.php/2021/08/03/青龙2-8ninja扫码安装教程/)\n\n1. **安装docker**\n\n```\n#安装docker\nsudo yum update -y\ncurl -sSL https://get.daocloud.io/docker | sh\nsudo systemctl start docker\nsudo systemctl status docker\nsudo systemctl enable docker\n```\n\n1. **复制以下命令，直接回车执行安装青龙2.8**\n\n```\ndocker run -dit \\\n-v /root/ql/config:/ql/config \\\n-v /root/ql/db:/ql/db \\\n-v /root/ql/jbot:/ql/jbot \\\n-v /root/ql/log:/ql/log \\\n-v /root/ql/raw:/ql/raw \\\n-v /root/ql/repo:/ql/repo \\\n-v /root/ql/scripts:/ql/scripts \\\n-v /root/ql/ninja:/ql/ninja \\\n-p 6368:5700 \\\n-p 6:5701 \\\n-e ENABLE_HANGUP=true \\\n-e ENABLE_WEB_PANEL=true \\\n--name qinglong \\\n--hostname qinglong \\\n--restart always \\\nwhyour/qinglong:latest\n```\n\n首次请先去浏览器访问 **`http://ip:5700/`** 并输入账号密码，随后会生成默认密码\n\n再执行`**cat /root/ql/config/auth.json |awk -F : '{print $3}'|awk -F '\"' '{print $2}'** `查看青龙默认密码\n\n**青龙2.8Faker仓库一键配置**\n\n感谢@oreo 大佬贡献配置\n\n```\ndocker exec -it qinglong bash -c \"$(curl -fsSL https://raw.githubusercontents.com/Oreomeow/VIP/main/Scripts/sh/1customCDN.sh)\" \n```\n\n一键配置完成后，请访问面板执行一次初始化任务后再进行修复青龙面板依赖库\n\n```\nql extra\n```\n\n**青龙面板依赖库修复方案**\n\n以[**Faker**](https://github.com/shufflewzc/faker2)仓库为例\n\n【axios date-fns依赖安装命令】\n\n```\ndocker exec -it qinglong bash -c \"npm install axios date-fns\"\n```\n\n【DOCKER npm依赖安装命令】\n\n```\ndocker exec -it qinglong bash -c \"cd scripts && npm i -S png-js\"\n```\n\n【canvas 依赖安装命令】\n\n```\ndocker exec -it qinglong bash -c \"apk add --no-cache build-base g++ cairo-dev pango-dev giflib-dev && cd scripts && npm install canvas --build-from-source\"\n```\n\n签到，宠汪汪兑换等依赖文件安装(必装) 感谢Oreo提供方案\n\n```\nyum install wget unzip -y\ncd /root/ql/scripts\nwget https://ghproxy.com/https://github.com/shufflewzc/faker2/releases/download/0.0.1/utils.zip && unzip utils.zip\n```\n\n1. **安装Ninja扫码**\n\n进入容器\n\n\\## qinglong为容器名 本文机器容器名为qinglong\n\n```\ndocker exec -it qinglong bash\n```\n\n执行以下命令\n\n```\ngit clone https://ghproxy.com/https://github.com/MoonBegonia/ninja.git /ql/ninja\ncd /ql/ninja/backend\npnpm install\npm2 start\ncp sendNotify.js /ql/scripts/sendNotify.js\n```\n\n将以下内容粘贴到 extra.sh（重启后自动更新并启动 Ninja)\n\n如果用了上面的一键配置脚本，这一步可以忽略。只需要在extra.sh中第29行改为UP即可实现开机自启 `**Ninja=\"up\" ##up为运行，down为不运行**`\n\n```\ncd /ql/ninja/backend\ngit checkout .\ngit pull\npnpm install\npm2 start\ncp sendNotify.js /ql/scripts/sendNotify.js\n```\n\n1. **Ninja 环境变量**\n\n目前支持的环境变量有：\n\n- ALLOW_ADD: 是否允许添加账号 不允许添加时则只允许已有账号登录（默认 true）\n- ALLOW_NUM: 允许添加账号的最大数量（默认 40）\n- NINJA_PORT: Ninja 运行端口（默认 5701）\n- NINJA_NOTIFY: 是否开启通知功能（默认 true）\n- NINJA_UA: 自定义 UA，默认为随机\n\n配置方式：\n\n```\ncd /ql/ninja/backend\ncp .env.example .env\nvi .env\npm2 start\n```\n\n**修改完成后需要 pm2 start 重启生效 ！！！**\n\n**SendNotify 环境变量**\n\n**此环境变量在青龙中配置！！！**\n\n- NOTIFY_SKIP_LIST: 通知黑名单，使用 & 分隔，例如 东东乐园&东东萌宠;\n\n**Ninja 自定义**\n\n自定义推送二维码：将 push.jpg 文件添加到 /ql/ninja/backend/static/ 目录下刷新网页即可。\n\n自定义常见活动：修改 /ql/backend/static/activity.json 即可\n\n**Ninja注意事项**\n\n- 重启后务必执行一次 ql extra 保证 Ninja 配置成功。\n- 更新 Ninja 只需要在容器中 ninja/backend 目录执行 git pull 然后 pm2 start\n- Qinglong 需要在登录状态（auth.json 中有 token）\n\n**Ninja常见问题**\n\n> 为什么我 git pull 失败？\n> A：一般是修改过文件，先运行一次 git checkout . 再 git pull。还是不行就删了重拉。\n>\n> Q：为什么访问不了？\n> A：一般为端口映射错误/失败，请自行检查配置文件。\n>\n> Q：为什么访问白屏？\n> A：使用现代的浏览器，而不是古代的。\n\n> 备用库\n\n【lxk0301】\n\n```\nql repo https://github.com/chinnkarahoi/jd_scripts.git \"jd_|jx_|getJDCookie\" \"activity|backUp\" \"^jd[^_]|USER\"\n```\n\n【龙珠】\n\n```\nqql repo https://github.com/longzhuzhu/nianyu.git \"qx\" \"main\"\n```\n\n【混沌】\n\n```\nql repo https://github.com/whyour/hundun.git \"quanx\" \"tokens|caiyun|didi|donate|fold|Env\"\n```\n\n【passerby-b】（需要配合专用ck文件）\n\n```\nql repo https://github.com/passerby-b/JDDJ.git \"jddj_\" \"scf_test_event\" \"jddj_cookie\"\n```\n\n【温某某】\n\n```\nql repo https://github.com/Wenmoux/scripts.git \"jd\" \"\" \"\" \"wen\"\n```\n\n【柠檬（胖虎）】\n\n```\nql repo https://github.com/panghu999/panghu.git \"jd_\"\n```\n\n【zoopanda（动物园）】\n\n```\nql repo https://github.com/zooPanda/zoo.git\n```\n\n【Ariszy（Zhiyi-N）】\n\n```\nql repo https://github.com/Ariszy/Private-Script.git \"JD\"\n```\n\n【ddo（hyzaw）】\n\n```\nql repo https://github.com/hyzaw/scripts.git \"ddo_\"\n```\n\n【qqsdff】点点券\n\n```\nql raw https://raw.githubusercontent.com/qqsdff/script/main/jd/jd_necklace.js\n```\n\n青龙拉取常用京东脚本库\n\n国内代理： [https://ghproxy.com/](https://ghproxy.com/https://raw.githubusercontent.com/sngxpro/QuanX/master/task/AllinOne.json)\n\n[Faker集合仓库]\n\n(最全最新仓库，记得定时备份＋foker更新)\n\n```\nql repo https://ghproxy.com/https://github.com/shufflewzc/faker2.git \"jd_|jx_|getJDCookie\" \"activity|backUp\" \"^jd[^_]|USER|ZooFaker_Necklace\"\n```\n\n【Faker仓库依赖库修复】SSH运行：\n\n```\ndocker exec -it QL bash -c \"apk add --no-cache build-base g++ cairo-dev pango-dev giflib-dev && cd scripts && npm install canvas --build-from-source\"\n```\n\n【curtinlv仓库】\n\n```\nql repo https://github.com/curtinlv/JD-Script.git\n```\n\n【star】\n\n```\nql repo https://github.com/star261/jd.git \"scripts\" \"code\"\n```\n\n【lxk0301】已私有，以下链接为备份库。柠檬代维护库。\n\n```\nql repo https://github.com/shufflewzc/jd_scripts-2.git \"jd_|jx_|getJDCookie\" \"activity|backUp\" \"^jd[^_]|USER\"\n```\n\n【龙珠】\n\n```\nql repo https://github.com/longzhuzhu/nianyu.git \"qx\" “main”\n```\n\n【混沌】\n\n```\nql repo https://github.com/whyour/hundun.git \"quanx\" \"tokens|caiyun|didi|donate|fold|Env\"\n```\n\n【passerby-b】（需要配合专用ck文件）\n\n```\nql repo https://github.com/passerby-b/JDDJ.git \"jddj_\" \"scf_test_event\" \"jddj_cookie\"\n```\n\n【温某某】\n\n```\nql repo https://ghproxy.com/https://github.com/shufflewzc/Wenmoux.git\n```\n\n【柠檬（胖虎）】\n\n```\nql repo https://github.com/panghu999/panghu.git \"jd_\"\n```\n\n【zoopanda（动物园）】以下为备份库\n\n```\nql repo https://github.com/shufflewzc/zoo.git \"zoo\"\n```\n\n【Ariszy（Zhiyi-N）】\n\n```\nql repo https://github.com/shufflewzc/Ariszy.git \"JD\"\n```\n\n【ddo（hyzaw）】貌似已经删库 以下为备份\n\n```\nql repo https://ghproxy.com/https://github.com/shufflewzc/hyzaw.git \"ddo_\"\n```\n\n"},{"slug":"自定义开源 Piwigo 相册——分享生活、记录漫漫人生路中的美好时光和感动","url":"/2021/08/16/自定义开源 Piwigo 相册——分享生活、记录漫漫人生路中的美好时光和感动/","content":"## 自定义开源 Piwigo 相册——分享生活、记录漫漫人生路中的美好时光和感动\n\n### 前言\n\n![piwigo.jpg](https://pic.iczkj.com/pic/2021/08/17/e28ccbd3345b1.jpeg)\n\n> **Piwigo** 是一款基于 Web 网页的开源图片管理系统，其带有非常简单的安装界面和管理面板，具有强大的功能来发布、管理、浏览您的照片，并且众多的扩展插件使 Piwigo 定制更加轻松，锦上添花。更令人振奋的是 Piwigo 是完全免费及源码开放的。\n> Piwigo 提供了一系列丰富的功能，可设置图片自由/限制访问，以及角色/用户管理，多服务器支持，用户评论支持，采用模板控制界面外观，多语言支持，多目录支持（每一张图片可以同时属于多个目录）。Piwigo 每年都在更新，新功能取决于程序小组的新想法和与社区会员的讨论。\n\n### Piwigo优点\n\n- 开源\n- 官方中文，官方中文社区支持\n- 性能优秀，分类数十万相片不在话下\n- 活跃用户多，官方从2002年持续维护至今\n- 优秀的插件和主题支持\n- 手机客户端支持\n- 完善的自定义支持\n- 众多实用功能：缩略图生成，完善的权限管理，批处理工具\n\n### 官方链接\n\n[Piwigo 官网](https://cn.piwigo.org/)\n\n### 搭建步骤\n\n#### 准备事项\n\n首先，你要拥有一台云服务器，这里购买的是腾讯云的轻量应用服务器。专属优惠购买连接：[轻量应用服务器Lighthouse](https://curl.qcloud.com/1I2k9h7D)。新老用户同享！\n\n![image-20210808173627896](https://pic.iczkj.com/pic/2021/08/08/153a225be624e.png)\n\n购买之后选择应用镜像宝塔`linux`面板.\n\n![image-20210819120017719](https://pic.iczkj.com/pic/2021/08/19/4de1bab0441af.png)\n\n#### 安装\n\n首先登录宝塔面板：登录腾讯云轻量应用服务器控制台，找到刚刚购买的服务器点击应用管理，在这里获取登录账号和密码。\n\n![image-20210819174635944](https://pic.iczkj.com/pic/2021/08/19/036a2bda81b8e.png)\n\n复制`sudo /etc/init.d/bt default`命令后得到账号和密码。\n\n![image-20210819165533825](https://pic.iczkj.com/pic/2021/08/19/e9485d3e55d39.png)\n\n这时我们访问`IP:8888/tencentcloud`来到宝塔面板管理页面。记得先去防火墙页面把8888端口打开，不然服务器会拒绝你的访问请求。\n\n![image-20210819165802398](https://pic.iczkj.com/pic/2021/08/19/1cc9c6f1f48c3.png)\n\n复制账号密码登录后，安装提示框左边的这些应用，一会会用到，耐心等待安装完成。\n\n![image-20210819170053222](https://pic.iczkj.com/pic/2021/08/19/84d0000049c64.png)\n\n安装完之后我们新建一个网站：\n\n![image-20210819170926090](https://pic.iczkj.com/pic/2021/08/19/4292b5cfa4f28.png)\n\n按照图示填写所需内容。\n\n![image-20210819171149588](https://pic.iczkj.com/pic/2021/08/19/c717d62dd48dc.png)\n\n这时，在宝塔面板上的准备工作就完成了，下面我们介绍两种安装方法。\n\n##### 一、网络安装\n\n首先要说明的是因为国内网络环境因素，中国·大陆服务器是无法进行网络安装的，会各种报错和失败。但是网络安装比较方便省事，如果想使用网络安装，那么建议购买中国·香港的服务器，就是我在文章开头推荐的链接。\n\n- 下载[NetInstall脚本](https://piwigo.org/download/dlcounter.php?code=netinstall)\n- 使用任何FTP客户端将脚本传输到您的Web空间\n- 在您的网络浏览器中打开脚本（例如http://example.com/piwigo-netinstall.php），然后按照以下步骤操作\n\n[更多信息](https://piwigo.org/doc/doku.php?id=user_documentation:learn:install:netinstall)\n\n##### 二、手动安装\n\n手动安装则需要事先下载安装包，此方法对服务器网络没有要求，可以购买大陆服务器，购买链接：[星星海SA2](https://curl.qcloud.com/G2ow0Ouy)\n\n- 下载[最新的稳定版本](https://cn.piwigo.org/download/dlcounter.php?code=latest)并解压缩\n- 使用任何FTP客户端将所有内容传输到您的Web空间\n- 打开您的网站（例如http://example.com/piwigo），然后按照以下步骤操作\n\n[更多信息](https://piwigo.org/doc/doku.php?id=user_documentation:learn:install:installation_manual)\n\n##### 三、初始化\n\n访问你的链接或者IP，会看到如下图所示的安装提示，按下图所示填写内容\n\n![image-20210819173521092](https://pic.iczkj.com/pic/2021/08/19/249eafab1e2fe.png)\n\n然后点击安装即可。\n\n![image-20210819173553388](https://pic.iczkj.com/pic/2021/08/19/3898dbb39a0da.png)\n\n### 基本功能\n\n- 管理员设置权限\n- 图片上传\n- 主题和插件\n- 用户管理\n- 手机APP管理\n\n#### 效果展示\n\n![screenshot.png](https://pic.iczkj.com/pic/2021/08/19/8545efbeb7656.png)\n\n到这里一款美观又好看的相册就安装完毕了，更多功能等你自己去探索~\n\n（悄悄说一句哦，这个相册可以记录你的拍摄地点和拍摄时间并以散点图的方式表现出来，所以，快去和你的爱人，家人，同学记录美好时光吧！）\n\n\n\n"},{"slug":"碎片时间都在刷手机？RSSHub带你逃出信息洪流！","url":"/2021/08/08/碎片时间都在刷手机？RSSHub带你逃出信息洪流！/","content":"# 碎片时间都在刷手机？RSSHub带你逃出信息洪流！\n\n## 前言\n\n现在人们花在电子产品上的时间越来越多了，各种短视频、无营养的营销号占据着我们的碎片时间。无论是通勤、排队亦或是工作无聊，似乎都可以利用刷手机来缓解某种焦躁不安。\n\n**可这样的缓解方式就像一个巨大的漩涡，会慢慢的吞噬掉一切。**\n\n在夹带着各种脑残营销号的低质文章冲击下，\n我们是否还记得自主深度思考所带来的颅内高潮？\n我们到底有多久没有放下手机，用自己的眼睛去看看窗外？\n我们到底有多久没有感受过真实的世界？！\n\n------------------------------\n\n![img](https://pic.iczkj.com/pic/2021/08/08/2f09cb3da7a1f.jpeg)\n\n想写这篇文章已经很久了，我想从这种绝望的漩涡中抽身出来，直到我接触到了`rsshub`这个项目。\n\n## Rsshub简介\n\n> rss的中文名是`简易信息聚合`，是一种描述和同步网站内容的格式，广泛用于网上新闻频道、博客等其它类型的网站或服务。\n\n简单的来说，它可以在不打开网站或app的情况下，利用你的终端去接收`你自己选择的`内容。\n所以rss把想看的优质信息网站、个人博客、或者是某位视频博主统统集中到一起，成为自己独属的资讯列表，在rss阅读器上“一网打尽”。\n但并不是所有的网站或者是内容都支持rss，所以这时候`rsshub`就来了。\n\n> RSSHub 是一个开源、简单易用、易于扩展的 RSS 生成器，可以给任何奇奇怪怪的内容生成 RSS 订阅源。RSSHub 借助于开源社区的力量快速发展中，目前已适配数百家网站的上千项内容。\n\n以上是rsshub的介绍，`万物皆可 RSS`就是他们的slogan。比如我喜欢b站上的某一位up主，但是没有rss链接。但是rsshub已经做好了订阅源，只需要在rss阅读器上添加`https://rsshub.app/bilibili/followings/article/99800931 `即可完成rss订阅。\n而且作为一个开源项目，这个社区一直在茁壮成长，隔一段时间就会发现多了很多可以订阅的内容。\n附上rsshub的项目地址。[RSSHub](https://github.com/DIYgod/RSSHub)\n\n## 在腾讯轻量云上用docker部署RSSHub\n\n我们可以直接使用官方的`https://rsshub.app`，但是这只是一个demo，缓存时间只有20分钟，而且有些目标网站有严重的反爬策略，所以在自己的域名上部署rsshub才是稳定的选择。\n\n### 购买腾讯云轻量应用服务器并安装宝塔面板\n\n#### 选择购买腾讯云轻量应用服务器\n\n第一步当然是拥有属于自己的轻量应用服务器，目前腾讯云轻量应用服务器是性价比最高的服务器，价格低，配置高，而且最近腾讯云对香港地区轻量服务器做了CPU内核升级，对大陆轻量做了带宽升级，升级后续费购买同价。性价比超高！购买链接：[购买链接](https://curl.qcloud.com/1I2k9h7D)\n\n![image-20210717210932846](https://pic.iczkj.com/pic/2021/07/17/a8137f5847691.png)\n\n这里推荐购买香港地区服务器，因为价格优惠还不用备案，但是不适合长久使用，如果自己有备案域名并想长期使用还是建议购买大陆服务器。\n\n#### 选择镜像\n\n购买时选择应用镜像的宝塔面板镜像。\n\n![image-20210808170307712](https://pic.iczkj.com/pic/2021/08/08/11945e2f4febe.png)\n\n----------------------------\n\n### 在docker下部署RSSHub\n那么安装好宝塔面板之后，进入宝塔面板的界面。点击左侧`软件商店`，然后在`应用搜索`这里输入docker进行搜索。并安装`docker管理器`。\n![image-20210809204715759](https://pic.iczkj.com/pic/2021/08/09/5d0c4bd93effd.png)\n安装成功之后点击右侧的`设置`按钮打开docker管理器的界面。\n![img](https://pic.iczkj.com/pic/2021/08/09/dad768cff21c5.png)\n接下来点击左侧的`镜像管理`，再点击`获取镜像`，打开一个新的小页面。\n![img](https://pic.iczkj.com/pic/2021/08/09/e03d2dd7fe320.png)\n在新的界面中输入`diygod/rsshub`或`diygod/rsshub:latest`并点击右侧的`获取镜像`。\n![img](https://pic.iczkj.com/pic/2021/08/09/7eb76835766de.png)\n稍等片刻后，我们就会在这里看到被拉取的镜像。\n![img](https://pic.iczkj.com/pic/2021/08/09/48965eb24e274.png)\n接下来再点击左侧的`容器列表`，并点击`创建容器`，然后会出来一个新的小页面。\n![img](https://pic.iczkj.com/pic/2021/08/09/10dc7a8ef7ab1.png)\n在跳出来的小页面中，首先`镜像`要选择刚才拉取的镜像。然后`端口映射`这里两边都输入1200。**然后点击右边的加号！否则不生效**，其他的保持默认即可。最后点击右下角提交。\n![img](https://pic.iczkj.com/pic/2021/08/09/1ab73e77b3b90.png)\n以上，我们已经部署好了rsshub。我们可以在浏览器中输入`IP+1200`的形式来进行访问，如`106.55.39.102:1200`。当然一定要去宝塔面板跟腾讯云后台开放端口！\n如果部署成功则会看到以下的页面：\n![ ](https://cdn.xhhdd.cc/2021/08/08/16283517575701.png)\n长期用域名访问也不是一回事，我们需要做好反向代理绑定域名并开启https访问。\n\n### 反向代理绑定域名+ssl\n\n接下来我们回到宝塔面板，点击左侧的`网站`，然后点击`添加站点`。\n![](https://cdn.xhhdd.cc/2021/08/08/jie-ping20210807-xia-wu115825.png)\n然后填入我们想绑定的域名，`php版本`可以选择纯静态，填好之后点击右下角提交。\n这时可以先去域名商那里添加一条解析记录，解析到自己当前的服务器地址。\n![image-20210809205210791](https://pic.iczkj.com/pic/2021/08/09/11d68ccc43df9.png)\n点击提交之后再次点开网站的设置页面，点击左侧的`反向代理`，然后点击`添加反向代理`。\n![image-20210809205302855](https://pic.iczkj.com/pic/2021/08/09/35f4e3ada25ee.png)\n在新跳出来的小页面中，`代理名称`可以随意填写，`目标url`填写`http://127.0.0.1:1200`。其中127.0.0.1就是本地的意思，1200就是我们刚才映射出来的端口。\n![img](https://pic.iczkj.com/pic/2021/08/09/865feae3ab3ee.png)\n那么以上反向代理就已经做好了，我们在点击右侧边栏的`ssl`去申请ssl证书。因为过程比较简单，按照提示来即可，我就不累述了。申请好之后记得点击右上角的`强制https`。\n![image-20210809205341286](https://pic.iczkj.com/pic/2021/08/09/453d2a7d97dc0.png)\n那么接下来直接在浏览器中输入刚才绑定的域名即可访问。出现了如下放的页面的话就证明部署成功。如果打不开的话请检查：\n\n- 域名有没有做好解析，ping一下自己的域名查看一下。\n- 443端口是否放行\n- 刚才容器的1200是否放行\n- 清除一下浏览器缓存\n- 换设备打开\n![img](https://pic.iczkj.com/pic/2021/08/09/1418ea39fa31b.png)\n\n## 使用rsshub\n\n好了，那么我们已经部署好了这个rsshub，接下来我们该怎么进行使用呢？\n首先我们打开它的文档页[https://docs.rsshub.app/](https://docs.rsshub.app/)，当然打不开的话也不用急，我们先往后看。\n\n我们在页面的左侧可以看到很多的分类，我们可以找到自己想订阅的内容。例如我经常刷知乎，所以先找一下知乎能怎么订阅。\n![img](https://pic.iczkj.com/pic/2021/08/09/f341742dfac90.png)\n下面就是知乎相关的订阅源了，可以订阅收藏夹、用户动态、知乎日报、用户专栏等。\n我们以下图的`用户动态`举例子，上面给出了路由`/zhihu/people/activities/:id`，所以我只要去找到我关注的用户id，比如说`2333`，然后加上刚才部署rsshub的域名即可。\n所以完整的订阅链接就是`https://rsshub.xxxx.xx/zhihu/people/activities/2333`。\n![img](https://pic.iczkj.com/pic/2021/08/09/e0911d1a3f396.png)\n\n> 其中`反爬严格`的字眼就是说明站点要求很严格，需要自建rsshub来保证稳定性。这也是我们自己部署的原因之一。\n\n## rss阅读器\n\n那么有了rss链接了，我们还需要一个rss阅读器才能观看这些内容。\n这个阅读器的种类非常多，网上的介绍也很全，而且不同的生态系统可能也不太一样，我就不在这里累述了。我是mac+ihone用户，所以用的是reeder 5。Android 平台可以试下Palabre 和 FeedMe。\n\n这是reeder的三栏界面，接下来点击上方的加号添加rss链接。\n![img](https://pic.iczkj.com/pic/2021/08/09/443733c12e667.png)\n输入链接之后点击search并添加。\n![image-20210809205811694](https://pic.iczkj.com/pic/2021/08/09/abf091f0b1836.png)\n那么知乎热榜就已经被我添加了。\n![](https://cdn.xhhdd.cc/2021/08/08/16283545171513.png)\n简简单单，没有任何额外的干扰。\n![](https://cdn.xhhdd.cc/2021/08/08/16283545646070.png)\n大致的用法就是这样啦！还可以细致的对rss阅读器进行设置，比如最多显示多少条信息，今天之后自动过期等等。\n\n\n## 最后\n\n因为篇幅问题，关于rsshub跟rss阅读器更多的用法就请大家去官网看看～\n希望大家能在信息洪流中抽身，希望rsshub对大家有帮助。\n\n\n\n\n\n\n\n"},{"slug":"文件一站式管理——腾讯云轻量搭载ZFile","url":"/2021/08/05/文件一站式管理——腾讯云轻量搭载ZFile/","content":"## 安全快速的管理和使用你的文件——腾讯云轻量搭建ZFile\n\n### 项目介绍\n\n> 此项目是一个在线文件目录的程序, 支持各种对象存储和本地存储, 使用定位是个人放常用工具下载, 或做公共的文件库. 不会向多账户方向开发。\n\n> 前端基于 [h5ai](https://larsjung.de/h5ai/) 的原有功能使用 Vue 重新开发、后端采用 SpringBoot, 数据库采用内嵌数据库.\n\n> 预览地址: [https://zfile.jun6.net](https://zfile.jun6.net/)\n>\n> 文档地址: http://docs.zhaojun.im/zfile\n\n### 搭建原因\n\n- 需要随时取用的文件较多，正在使用的设备没用相对于的软件，而且有时在公共电脑上并不想输入账号密码，因为这样会导致信息泄露。搭建完成这个程序后，只需要一个浏览器即可访问自己的文件。\n- 自己手中云盘较多，有时不知道自己想要的文件在哪里。\n- 能够直接预览类似图片、视频这样的文件，方便快捷。\n\n### 系统特色\n\n- Docker 支持\n- 文件数据库 (免安装)\n- 直链功能\n- 图片模式\n- 文件夹密码\n- 忽略文件夹\n- 自定义 JS, CSS\n- 自定义目录的 readme 说明文件\n- 支持在线浏览文本文件, 视频, 图片, 音乐. (支持 FLV 和 HLS)\n- 文件/目录二维码\n- 同时挂载多个存储策略\n- 缓存动态开启, ~~缓存自动刷新 (v2.2 及以前版本支持)~~\n- ~~全局搜索 (v2.2 及以前版本支持)~~\n- 支持 S3 协议, 阿里云 OSS, FTP, 华为云 OBS, 本地存储, MINIO, OneDrive 国际/家庭/个人版/世纪互联版/SharePoint, , 七牛云 KODO, 腾讯云 COS, 又拍云 USS.\n\n### 开始搭建\n\n首先，你要拥有一台云服务器，这里购买的是腾讯云的轻量应用服务器。专属优惠购买连接：[轻量应用服务器Lighthouse](https://curl.qcloud.com/1I2k9h7D)。新老用户同享！\n\n![image-20210808173627896](https://pic.iczkj.com/pic/2021/08/08/153a225be624e.png)\n\n下面介绍两种搭建方式：\n\n#### 一、Docker搭建\n\n![image-20210807201729480](https://pic.iczkj.com/pic/2021/08/07/b9baf728ae4c0.png)\n\n选购完服务器之后选择应用镜像下的Docker CE镜像，等待应用镜像安装完成。然后进入控制台登录服务器。\n\n![image-20210807202744567](https://pic.iczkj.com/pic/2021/08/07/3d93a2c366af7.png)\n\n在控制台输入下面的代码：\n\n```dockerfile\ndocker pull zhaojun1998/zfile\n```\n\n![image-20210807203814430](https://pic.iczkj.com/pic/2021/08/07/9afe6d043431c.png)\n\n首次运行会自动创建数据库目录和日志文件目录，并映射到本地，分别为 `/root/zfile/db` (数据库文件) 和 `/root/zfile/logs` (日志文件). 后期迁移可直接将整个zfile目录备份恢复, 并再次执行以下命令。\n\n```dockerfile\ndocker run -d --name=zfile --restart=always \\\n    -p 8080:8080 \\\n    -v /root/zfile/db:/root/.zfile/db \\\n    -v /root/zfile/logs:/root/.zfile/logs \\\n    zhaojun1998/zfile\n```\n\n![image-20210807211223836](https://pic.iczkj.com/pic/2021/08/07/577e800d76f37.png)\n\n#### 二、宝塔安装（Linux）\n\n如果你已经拥有轻量或者购买轻量时想使用宝塔面板，那么请看这个安装教程。腾讯云轻量专属优惠购买：[腾讯云轻量](https://curl.qcloud.com/1I2k9h7D)\n\n购买时选择应用镜像的宝塔面板镜像。\n\n![image-20210808170307712](https://pic.iczkj.com/pic/2021/08/08/11945e2f4febe.png)\n\n点击应用管理选项卡：\n\n![image-20210808170533403](https://pic.iczkj.com/pic/2021/08/08/98cba241822c0.png)\n\n如果还没有放行端口记得去防火墙选项卡放行8888端口。\n\n根据这个页面提供的面板首页地址去访问宝塔面板首页。\n\n账号密码登录服务器输入\n\n```Linux\nsudo /etc/init.d/bt default\n```\n\n![image-20210808170916662](https://pic.iczkj.com/pic/2021/08/08/a1fb2efdd2c5a.png)\n\n获取到账号密码之后登录宝塔面板并安装web环境。\n\n如果你只想IP访问可以略过安装宝塔这一步，如果想域名访问需要在宝塔建立一个站点并做反向代理。\n\n##### 安装依赖\n\n```bash\n# CentOS系统\nyum install -y java-1.8.0-openjdk unzip\n\n# Debian/Ubuntu系统\napt update\napt install -y openjdk-8-jre-headless unzipCopy to clipboardErrorCopied\n```\n\n![image-20210808172828175](https://pic.iczkj.com/pic/2021/08/08/aad54b2ebb7ee.png)\n\n出现complete！即为安装成功。\n\n##### 下载项目\n\n##### 安装说明\n\n下面命令中第一行表示默认安装到用户目录下: `~/zfile` 下。\n\n对于 `root` 用户, `~` = `/root`, `~/zfile` 表示在 `/root/zfile` 路径下。\n\n对于其他用户, `~` = `/hone/用户名` 表示在 `/home/用户名/` 路径下。如对于 `oracle` 用户, `~/zfile` 则表示安装在 `/home/oracle/zfile` 下。\n\n如需更改安装路径, 请自行修改，如 `export ZFILE_INSTALL_PATH=/data/zfile`，表示安装在 `/data/zfile` 路径下。\n\n```bash\nexport ZFILE_INSTALL_PATH=~/zfile\nmkdir -p $ZFILE_INSTALL_PATH && cd $ZFILE_INSTALL_PATH\nwget https://c.jun6.net/ZFILE/zfile-release.war\nunzip zfile-release.war && rm -rf zfile-release.war\nchmod +x $ZFILE_INSTALL_PATH/bin/*.shCopy to clipboardErrorCopied\n```\n\n##### 常用命令\n\n以下为默认未修改安装路径下的情况，如修改了安装路径请自行更改命令所在路径。\n\n```bash\n ~/zfile/bin/start.sh       # 启动项目\n ~/zfile/bin/stop.sh        # 停止项目\n ~/zfile/bin/restart.sh     # 重启项目\n```\n\n#### 前端配置\n\n如果IP访问则是IP加8080端口，域名访问则需要反向代理。记得在控制台开启8080端口，如果安装了宝塔，也要在宝塔上开端口。\n\n![image-20210807211432743](https://pic.iczkj.com/pic/2021/08/07/eaf9bd6e84f24.png)\n\n点击确定添加驱动器。\n\n![image-20210807211525612](https://pic.iczkj.com/pic/2021/08/07/be773b5be2ad8.png)\n\n点击驱动器列表。\n\n![image-20210807211608648](https://pic.iczkj.com/pic/2021/08/07/6b8ead0c1a904.png)\n\n点击新增按钮。\n\n![image-20210808165148437](https://pic.iczkj.com/pic/2021/08/08/9a40325855a48.png)\n\n输入驱动器名称，选择你要存储的网盘，我这里拿OneDrive为例。\n\n![image-20210808165256399](https://pic.iczkj.com/pic/2021/08/08/2d3a77b81bcae.png)\n\n点击前往获取令牌，根据提示获得你OneDrive账号的令牌并填入相应位置。\n\n![image-20210808165357863](https://pic.iczkj.com/pic/2021/08/08/a63a7d3fa153c.png)\n\n然后点击保存按钮。\n\n这样你就把你自己的OneDrive挂载到网站上了，非常方便。公用设备拿取、存放文件再也不需要担心需要下载客户端和输入账号密码了。是不是很方便呢，你还可以挂载更多常见网盘程序，让你随时随地调用你的文件。不想公开的文件还可以设置密码，保障自己文件的安全。这样，一个轻便快捷的文件管理器就安装完成了~\n"},{"slug":"腾讯云轻量快速搭建个人网盘","url":"/2021/07/16/腾讯云轻量快速搭建个人网盘/","content":"## 腾讯云轻量快速搭建个人网盘\n\n现在市面上的网盘大多数都限速，并且文件可能不安全，所以拥有一个自己的服务器就可以搭建轻便的个人网盘了，最方便的是你不需要任何tx服务器的知识，因为腾讯云轻量应用服务器已经把镜像安排好了，那么话不多说，我们马上开始吧！\n\n------\n\n### 选择购买腾讯云轻量应用服务器\n\n第一步当然是拥有属于自己的轻量应用服务器，目前腾讯云轻量应用服务器是性价比最高的服务器，价格低，配置高，而且最近腾讯云对香港地区轻量服务器做了cpu内核升级，对大陆轻量做了带宽升级，升级后续费购买同价。性价比超高！购买链接：[购买链接](https://curl.qcloud.com/1I2k9h7D)\n\n![image-20210717210932846](https://pic.iczkj.com/pic/2021/07/17/a8137f5847691.png)\n\n这里推荐购买香港地区服务器，因为价格优惠还不用备案，但是不适合长久使用，如果自己有备案域名并想长期使用还是建议购买大陆服务器。\n\n------\n\n### 选择镜像\n\n点击购买创建后，我们选择Cloudreve这个应用镜像并点击确定。\n\n![image-20210717192955637](https://pic.iczkj.com/pic/2021/07/17/d9f5500ab809d.png)\n\n创建好之后来到腾讯云轻量应用服务器控制台：[腾讯云轻量应用服务器控制台](https://console.cloud.tencent.com/lighthouse/instance/index) 找到自己购买的腾讯云轻量应用服务器。\n\n![image-20210717194801976](https://pic.iczkj.com/pic/2021/07/17/843964a899bc9.png)\n\n点击你购买的腾讯云轻量应用服务器进入他的管理界面。\n\n![image-20210717201715445](https://pic.iczkj.com/pic/2021/07/17/99e9a8ac9aebf.png)\n\n然后点击应用管理。\n\n![image-20210717202220664](https://pic.iczkj.com/pic/2021/07/17/bbd6ad3f860ad.png)\n\n然后点击管理员地址这个链接，登录实例输入`cat ~lighthouse/credentials.txt`获取密码。\n\n![image-20210717203958003](https://pic.iczkj.com/pic/2021/07/17/1dd6431311707.png)\n\n获取到账号密码之后复制保存备用，点击管理员地址进入管理员登录界面。\n\n![image-20210717205551718](https://pic.iczkj.com/pic/2021/07/17/52a9dd80d4d99.png)\n\n------\n\n### 使用网盘\n\n把账号密码输入到上面，点击登录。\n\n![image-20210717205743419](https://pic.iczkj.com/pic/2021/07/17/515ae502e47d4.png)\n\n接下来我们点击上传的加号，测试一下是否正常和上传速度。\n\n![image-20210717210055009](https://pic.iczkj.com/pic/2021/07/17/a87c898ebf283.png)\n\n平均下来有10M/S左右，很快了，已经和某盘开会员已经同速度了，很不错，到这里这个网盘就搭建完成了，我们在看一下它的其他功能。\n\n![image-20210717210327736](https://pic.iczkj.com/pic/2021/07/17/dbda440214e42.png)\n\n在线解压也是一个不错的功能，感觉功能不比某盘差。\n\n![image-20210717210810348](https://pic.iczkj.com/pic/2021/07/17/8bc8f05893d6c.png)\n\n甚至还可以挂载本地随时上传文件，真的很方便。\n\n欢迎大家和我一起共同探讨轻量应用服务器的使用技巧，谢谢观看。\n\n![image-20210722202831339](https://pic.iczkj.com/pic/2021/07/22/720e2a3490847.png)\n\n"},{"title":"利用腾讯云轻量搭建属于自己的博客小程序","slug":"利用腾讯云轻量搭建属于自己的小程序","url":"/2021/07/14/利用腾讯云轻量搭建属于自己的小程序/","content":"\n### 为什么要搭建自己的博客小程序\n\n现在是QQ和微信内部流量的时代，如果你分享的链接可以在QQ和微信正常打开还好，但是如果变白或者变红那么就没有人愿意打开了，就像这样：\n\n正是因为这样，许多站点难以生存，被迫关站。而且我国规定个人网站是不允许接入广告的，这样一来，许多站长没有了收入，就又会有一批站点因此而消失。而QQ和微信小程序即便是个人也可以接广告，而且在QQ微信内部分享永远不会出现被拦截的情况。~~（除非你自己站点挂了）~~\n\n### 什么是小程序\n\n> 小程序是一种全新的连接用户与服务的方式，它可以在微信内被便捷地获取和传播，同时具有出色的使用体验。\n\n### 服务器的选择\n\n现在服务器云厂商有许多家，但是我在这里推荐腾讯云的云轻量，因为他不仅可以一键配置镜像，非常的方便，价格还非常的优惠。而且最近腾讯云还升级了云轻量的带宽，平均免费提升2M的带宽，而且价格不变。欢迎大家前来选购，通过这个链接还有更多优惠：[腾讯云轻量](https://curl.qcloud.com/1I2k9h7D)\n\n### 购买服务器并选择镜像\n\n因为小程序的合法域名要求是备案域名，所以我们这里选择中国大陆的云轻量服务器，他有这么几种选项：\n\n![image-20210714213134655](https://pic.iczkj.com/pic/2021/07/14/1875a9f591f07.png)\n\n因为这里是演示站，选择第一个就够了。大家实际建站可以选择第二个，大一点的站点就选择第三个。如果你们还是觉得贵，可以选择购买下面这两个活动链接的产品，3-4折不等，非常的优惠。\n\n购买时选择`typecho1.1.0`镜像，一键安装，非常简便。\n\n![image-20210714213411046](https://pic.iczkj.com/pic/2021/07/14/f08be1d28bb54.png)\n\n勾选同意协议后点击立即购买：\n\n![image-20210714213534692](https://pic.iczkj.com/pic/2021/07/14/2c93468b2f796.png)\n\n这样我们就拥有了一台属于自己的轻量云服务器，那么我们现在就开始操作吧！\n\n首先来到控制台：[腾讯云轻量应用服务器控制台](https://console.cloud.tencent.com/lighthouse/instance/index)\n\n这时你会看到你创建好的服务器，如下图：\n\n![image-20210716173130341](https://pic.iczkj.com/pic/2021/07/16/015f1bd0132b4.png)\n\n然后我们点击他进入控制台，并在这里复制你的公网IP并访问：\n\n![image-20210716173310002](https://pic.iczkj.com/pic/2021/07/16/7462d088ce23b.png)\n\n然后你就能访问你的博客了：\n\n![image-20210716173354336](https://pic.iczkj.com/pic/2021/07/16/5f483463804e0.png)\n\n但不要高兴太早，现在你刚刚拥有了个人博客，现在才刚刚开始搭建小程序。\n\n### 绑定域名并配置https\n\n为什么要绑定域名呢，因为小程序要求使用备案域名进行访问，否则不予上线，备案非常简单，只需要在腾讯云备案小程序里上传网站和资料然后静静等待即可，这里不做赘述。接下来我用一个已经备案的域名进行绑定。\n\n首先来到腾讯云域名控制台：[腾讯云域名控制台](https://console.cloud.tencent.com/domain)\n\n![image-20210716180132736](https://pic.iczkj.com/pic/2021/07/16/be0f32aeec761.png)\n\n点击注册域名按钮，去选一个自己心仪的域名，下面这个链接是腾讯云域名活动链接，首年有优惠：[腾讯云秒杀](https://curl.qcloud.com/WCaPKCrv)\n\n注册好之后点击解析按钮：\n\n![image-20210716180706803](https://pic.iczkj.com/pic/2021/07/16/dd8232cf33bd0.png)\n\n点这个添加记录：\n\n![image-20210716180844460](https://pic.iczkj.com/pic/2021/07/16/f70488a95ac2e.png)\n\n创建两个记录，主机记录一个是www一个是@，记录值是你创建服务器的IP地址，然后点击确认即可。\n\n![image-20210716181119689](https://pic.iczkj.com/pic/2021/07/16/3b93ba34fa1a2.png)\n\n然后小程序还需要https访问，那什么是https呢，什么是ssl证书呢？\n\n> HTTPS （全称：Hyper Text Transfer Protocol over SecureSocket Layer），是以安全为目标的 HTTP 通道，在HTTP的基础上通过传输加密和[身份认证](https://baike.baidu.com/item/身份认证/5294713)保证了传输过程的安全性。HTTPS 在HTTP 的基础下加入[SSL](https://baike.baidu.com/item/SSL/320778)，HTTPS 的安全基础是 SSL，因此加密的详细内容就需要 SSL。 HTTPS 存在不同于 HTTP 的默认端口及一个加密/身份验证层（在 HTTP与 [TCP](https://baike.baidu.com/item/TCP/33012) 之间）。这个系统提供了身份验证与加密通讯方法。它被广泛用于[万维网](https://baike.baidu.com/item/万维网/215515)上安全敏感的通讯，例如交易支付等方面。\n\n>SSL证书是[数字证书](https://baike.baidu.com/item/数字证书/326874)的一种，类似于驾驶证、护照和营业执照的电子副本。因为配置在服务器上，也称为SSL服务器证书。SSL 证书就是遵守 [SSL协议](https://baike.baidu.com/item/SSL协议/4602579)，由受信任的数字证书颁发机构CA，在验证服务器身份后颁发，具有服务器身份验证和数据传输加密功能。\n\n了解了原理之后那么我们来开始操作吧！登录腾讯云域名注册控制台，在你刚才的解析记录后面找到ssl字样并点击：\n\n![image-20210716184219808](https://pic.iczkj.com/pic/2021/07/16/7b63f3a1f1782.png)\n\n然后出现这个界面：\n\n![image-20210716184624475](https://pic.iczkj.com/pic/2021/07/16/7b2302443e2dd.png)\n\n一般情况下，这个免费的就够用了，~~当然你是土豪就当我没说，~~接下来点击免费申请，然后等待一段时间，他会验证你的域名，不用多长时间就会给你颁发证书了。\n\n接下来我们来配置https证书，腾讯云提供了一键配置https证书：[一键配置https证书控制台](https://console.cloud.tencent.com/https)，进入控制台之后按照提示进行操作即可。\n\n### 搭建小程序\n\n前期工作都准备好了，接下来我们开始搭建小程序，我这里选择的是QQ小程序。\n\n先登录QQ小程序控制台，没有账号需要先注册一个。地址：[QQ小程序](https://q.qq.com/#/)\n\n进入首页设置后按照首页提示进行配置，并填写合法域名。下载小程序开发者工具，上传源代码，填写必要设置后上传并在QQ小程序控制台发布。\n\n在typecho管理员后台上传插件并开启配置，输入和小程序端相同的token即可访问。到这里小程序就搭建完成了。\n\n小程序源码消耗精力，这里分为免费和付费两种，免费仅有QQ端，付费有QQ和微信端，欢迎关注星橙学术公众号了解详情。如果有精力也可以自己写小程序源代码。欢迎访问我的QQ小程序，QQ小程序搜索：星橙学术。\n\n注：付费小程序为我代卖，通过我的公众号购买优惠10元。\n"}]